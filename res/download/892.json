{
    "items": [
        {
            "tags": [
                "netbeans",
                "antlr4",
                "antlr3",
                "lexer",
                "stringtemplate-4"
            ],
            "owner": {
                "reputation": 21,
                "user_id": 9659107,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/OTrIJ.jpg?s=128&g=1",
                "display_name": "Cory Edwards",
                "link": "https://stackoverflow.com/users/9659107/cory-edwards"
            },
            "is_answered": false,
            "view_count": 46,
            "answer_count": 0,
            "score": 0,
            "last_activity_date": 1524142777,
            "creation_date": 1523975318,
            "last_edit_date": 1524142777,
            "question_id": 49880793,
            "body_markdown": "I have been trying to build a Lexer in Netbeans 8.2 to have the correct syntax for String Template v4 files. The problem is that Netbeans modules only have access to ANTLR 3.3 or 4.5 libraries, and I cannot find any String template v4, either pre compiled or needing to be compiled, Lexer grammar files to work with. \r\n\r\nDoes anyone know of any String Template v4 grammar files that can be built with ANTLR 3.3 or 4.5?\r\n\r\n**EDIT 1:**\r\n\r\nSomeone in the comments asked for some examples and what I have tried so far.I have tried using the String template Lexer from [here][1]. I took the code from the compile section of the source and it seemed to work ok, but it was very buggy since it was built with ANTLR 3.5 and I was trying to have it run with ANTRL 3.3. The syntax coloring worked, but it was having trouble reading files and sometimes outright failed.\r\n\r\nMy second attempt was with [this set of grammars][2]. They load all of the files properly since I could compile it with 4.5, but the syntax coloring is completely off. It looks like the grammars are more so built for Java than String Template v4.\r\n\r\nHere is the code I currently am working with to build the Lexer in the Netbeans module:\r\n\r\nLanguage Provider:\r\n\r\n    import org.netbeans.api.lexer.InputAttributes;\r\n    import org.netbeans.api.lexer.Language;\r\n    import org.netbeans.api.lexer.LanguagePath;\r\n    import org.netbeans.api.lexer.Token;\r\n    import org.netbeans.spi.lexer.LanguageEmbedding;\r\n    import org.netbeans.spi.lexer.LanguageProvider;\r\n    \r\n    /**\r\n     *\r\n     * @author Cory\r\n     */\r\n    @org.openide.util.lookup.ServiceProvider(service=org.netbeans.spi.lexer.LanguageProvider.class)\r\n    public class stLanguageProvider extends LanguageProvider {\r\n    \r\n        @Override\r\n        public Language&lt;?&gt; findLanguage(String mimeType) {\r\n            if (&quot;text/x-st&quot;.equals(mimeType)){\r\n                return new stLanguageHierarchy().language();\r\n            }\r\n            \r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public LanguageEmbedding&lt;?&gt; findLanguageEmbedding(Token&lt;?&gt; token, LanguagePath languagePath, InputAttributes inputAttributes) {\r\n            return null;\r\n        }\r\n        \r\n    }\r\n\r\nLanguage Hierarchy:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import org.netbeans.api.lexer.Language;\r\n    import org.netbeans.spi.lexer.LanguageHierarchy;\r\n    import org.netbeans.spi.lexer.Lexer;\r\n    import org.netbeans.spi.lexer.LexerRestartInfo;\r\n    \r\n    /**\r\n     *\r\n     * @author Cory\r\n     */\r\n    public class stLanguageHierarchy extends LanguageHierarchy&lt;stTokenId&gt; {\r\n    \r\n        private static List&lt;stTokenId&gt; tokens = new ArrayList&lt;stTokenId&gt;();\r\n        private static Map&lt;Integer, stTokenId&gt; idToToken = new HashMap&lt;Integer, stTokenId&gt;();\r\n        \r\n        private static final Language&lt;stTokenId&gt; language = new stLanguageHierarchy().language();\r\n        \r\n        public static Language&lt;stTokenId&gt; getLanguage() {\r\n            return language;\r\n        }\r\n        \r\n        static {\r\n            TokenType[] tokenTypes = TokenType.values();\r\n            for (TokenType tokenType : tokenTypes) {\r\n                tokens.add(new stTokenId(tokenType.name(), tokenType.category, tokenType.id));\r\n            }\r\n            for (stTokenId token : tokens) {\r\n                idToToken.put(token.ordinal(), token);\r\n            }\r\n        }\r\n        \r\n        /**\r\n         * Returns an actual stTokenId from an id. This essentially allows\r\n         * the syntax highlighter to decide the color of specific words.\r\n         * @param id\r\n         * @return\r\n         */\r\n        static synchronized stTokenId getToken(int id) {\r\n            return idToToken.get(id);\r\n        }\r\n        \r\n        @Override\r\n        protected Collection&lt;stTokenId&gt; createTokenIds() {\r\n            return tokens;\r\n        }\r\n    \r\n        @Override\r\n        protected Lexer&lt;stTokenId&gt; createLexer(LexerRestartInfo&lt;stTokenId&gt; lri) {\r\n            return new stEditorLexer(lri);\r\n        }\r\n    \r\n        @Override\r\n        protected String mimeType() {\r\n            return &quot;text/x-st&quot;;\r\n        }\r\n    }\r\n\r\nThe Editor lexer: This is where the String Template Lexer should be brought in if I can find it. This code here is using the lexer from ANTLR 4.5 build from the [second link][2].\r\n\r\n    import org.antlr.parser.st4.STLexer;\r\n    import org.antlr.v4.runtime.CommonTokenStream;\r\n    import org.antlr.v4.runtime.Token;\r\n    import org.netbeans.spi.lexer.Lexer;\r\n    import org.netbeans.spi.lexer.LexerInput;\r\n    import org.netbeans.spi.lexer.LexerRestartInfo;\r\n    import org.openide.util.Exceptions;\r\n    \r\n    /**\r\n     *\r\n     * @author Cory\r\n     */\r\n    public class stEditorLexer implements Lexer&lt;stTokenId&gt; {\r\n    \r\n        private static final String SOURCE_NAME = &quot;stEditor&quot;;\r\n        \r\n        private LexerRestartInfo&lt;stTokenId&gt; lri;\r\n        private STLexer lexer;\r\n        \r\n        public stEditorLexer(LexerRestartInfo&lt;stTokenId&gt; lri) {\r\n            this.lri = lri;\r\n            try\r\n            {\r\n                LexerInput lexerInput = lri.input();\r\n                AntlrCharStream charStream = new AntlrCharStream(lexerInput, SOURCE_NAME);\r\n                lexer = new STLexer(charStream);\r\n                lexer.setDelimiters(&#39;$&#39;, &#39;$&#39;);\r\n                lexer.setChannel(STLexer.OFF_CHANNEL);\r\n                lexer.reset();\r\n                AntlrLexerState state = (AntlrLexerState) lri.state();\r\n    \r\n                if (state != null) {\r\n                    state.apply(lexer);\r\n                }\r\n            }\r\n            catch(Exception ex)\r\n            {\r\n                Exceptions.printStackTrace(ex);\r\n            }\r\n        }\r\n        \r\n        /**\r\n         * @return the next token recognized by the lexer or null if there are no\r\n         *         more characters (available in the input) to be tokenized.\r\n         */\r\n        @Override\r\n        public org.netbeans.api.lexer.Token&lt;stTokenId&gt; nextToken() {\r\n            Token token = lexer.nextToken();\r\n    \r\n            stTokenId tokenId = null;\r\n    \r\n            if (token.getType() != LexerInput.EOF) {\r\n                tokenId  = stLanguageHierarchy.getToken(token.getType());\r\n                System.out.println(&quot;nextToken - &quot; + tokenId.toString() + &quot; &quot; + token.getText());\r\n            }  else if (lri.input().readLength() &gt; 0) {\r\n                // Remaining chars on the input should be tokenized\r\n                // see https://netbeans.org/bugzilla/show_bug.cgi?id=240826\r\n                tokenId = stLanguageHierarchy.getToken(STLexer.HORZ_WS);\r\n                System.out.println(&quot;nextToken - ERROR (as WS)&quot;);\r\n            }\r\n    \r\n            if (tokenId == null) {\r\n                System.out.println(&quot;nextToken - EOF&quot;);\r\n                return null;\r\n            }\r\n    \r\n            // According to the method specification, this must *not* return any\r\n            // other Token instances than those obtained from the TokenFactory.\r\n            return lri.tokenFactory().createToken(tokenId);\r\n        }\r\n    \r\n        @Override\r\n        public Object state() {\r\n            return new AntlrLexerState(lexer._mode, lexer._modeStack);\r\n        }\r\n    \r\n        @Override\r\n        public void release() {\r\n        }\r\n    }\r\n\r\nThe TokenType class I generated from the Tokens from the second link as well:\r\n\r\n    import org.netbeans.api.lexer.Language;\r\n    import org.netbeans.api.lexer.TokenId;\r\n    \r\n    /**\r\n     *\r\n     * @author Cory\r\n     */\r\n    public enum TokenType implements TokenId {\r\n        \r\n        DOC_COMMENT(1, &quot;other&quot;),\r\n        BLOCK_COMMENT(2, &quot;comment&quot;),\r\n        LINE_COMMENT(3, &quot;comment&quot;),\r\n        TMPL_COMMENT(4, &quot;comment&quot;),\r\n        HORZ_WS(5, &quot;other&quot;),\r\n        VERT_WS(6, &quot;other&quot;),\r\n        ESCAPE(7, &quot;separator&quot;),\r\n        LDELIM(8, &quot;specialCharacter&quot;),\r\n        RBRACE(9, &quot;separator&quot;),\r\n        TEXT(10, &quot;text&quot;),\r\n        LBRACE(11, &quot;separator&quot;),\r\n        RDELIM(12, &quot;specialCharacter&quot;),\r\n        STRING(13, &quot;string&quot;),\r\n        IF(14, &quot;keyword&quot;),\r\n        ELSEIF(15, &quot;keyword&quot;),\r\n        ELSE(16, &quot;keyword&quot;),\r\n        ENDIF(17, &quot;keyword&quot;),\r\n        SUPER(18, &quot;keyword&quot;),\r\n        END(19, &quot;keyword&quot;),\r\n        TRUE(20, &quot;keyword&quot;),\r\n        FALSE(21, &quot;keyword&quot;),\r\n        AT(22, &quot;keyword&quot;),\r\n        ELLIPSIS(23, &quot;keyword&quot;),\r\n        DOT(24, &quot;separator&quot;),\r\n        COMMA(25, &quot;separator&quot;),\r\n        COLON(26, &quot;separator&quot;),\r\n        SEMI(27, &quot;separator&quot;),\r\n        AND(28, &quot;keyword&quot;),\r\n        OR(29, &quot;keyword&quot;),\r\n        LPAREN(30, &quot;separator&quot;),\r\n        RPAREN(31, &quot;separator&quot;),\r\n        LBRACK(32, &quot;separator&quot;),\r\n        RBRACK(33, &quot;separator&quot;),\r\n        EQUALS(34, &quot;separator&quot;),\r\n        BANG(35, &quot;separator&quot;),\r\n        ERR_CHAR(36, &quot;keyword&quot;),\r\n        ID(37, &quot;keyword&quot;),\r\n        PIPE(38, &quot;separator&quot;);\r\n    \r\n        public int id;\r\n        public String category;\r\n        public String text;\r\n        \r\n        private static final Language&lt;stTokenId&gt; langauge = new stLanguageHierarchy().language();\r\n    \r\n        private TokenType(int id, String category) {\r\n            this.id = id;\r\n            this.category = category;\r\n        }\r\n    \r\n        public static TokenType valueOf(int id) {\r\n            TokenType[] values = values();\r\n            for (TokenType value : values) {\r\n                if (value.id == id) {\r\n                    return value;\r\n                }\r\n            }\r\n            throw new IllegalArgumentException(&quot;The id &quot; + id + &quot; is not recognized&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public String primaryCategory() {\r\n            return category;\r\n        }\r\n        \r\n        public static final Language&lt;stTokenId&gt; getLanguage() {\r\n            return langauge;\r\n        }\r\n    }\r\n\r\nEverything else such as the AntlrCharStream is code that I found to work with the ANTLR 4.5 library.\r\n\r\n**EDIT 2**\r\nI thought adding some sample output would help to try and figure out what could be the problem.\r\n\r\n[![Sample of output][3]][3]\r\n\r\nThis is the color scheme:\r\n\r\n    &lt;fontcolor name=&quot;keyword&quot;           foreColor=&quot;blue&quot; default=&quot;default&quot;/&gt;\r\n    &lt;fontcolor name=&quot;comment&quot;           foreColor=&quot;green&quot; default=&quot;default&quot;/&gt;    \r\n    &lt;fontcolor name=&quot;other&quot;             foreColor=&quot;gray&quot; default=&quot;default&quot;/&gt;    \r\n    &lt;fontcolor name=&quot;specialCharacter&quot;  foreColor=&quot;orange&quot; default=&quot;default&quot;/&gt; \r\n    &lt;fontcolor name=&quot;text&quot;              foreColor=&quot;pink&quot; default=&quot;default&quot;/&gt; \r\n    &lt;fontcolor name=&quot;string&quot;            foreColor=&quot;red&quot; default=&quot;default&quot;/&gt; \r\n    &lt;fontcolor name=&quot;separator&quot;         foreColor=&quot;magenta&quot; default=&quot;default&quot;/&gt; \r\n\r\n\r\n  [1]: https://github.com/antlr/stringtemplate4\r\n  [2]: https://github.com/antlr/grammars-v4/tree/master/stringtemplate\r\n  [3]: https://i.stack.imgur.com/oyFFm.png",
            "link": "https://stackoverflow.com/questions/49880793/building-a-lexer-in-netbeans-8-2-for-string-template-v4-using-antlr-3-3-or-4-5",
            "title": "Building a Lexer in Netbeans 8.2 for String Template v4 using Antlr 3.3 or 4.5",
            "body": "<p>I have been trying to build a Lexer in Netbeans 8.2 to have the correct syntax for String Template v4 files. The problem is that Netbeans modules only have access to ANTLR 3.3 or 4.5 libraries, and I cannot find any String template v4, either pre compiled or needing to be compiled, Lexer grammar files to work with. </p>\n\n<p>Does anyone know of any String Template v4 grammar files that can be built with ANTLR 3.3 or 4.5?</p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>Someone in the comments asked for some examples and what I have tried so far.I have tried using the String template Lexer from <a href=\"https://github.com/antlr/stringtemplate4\" rel=\"nofollow noreferrer\">here</a>. I took the code from the compile section of the source and it seemed to work ok, but it was very buggy since it was built with ANTLR 3.5 and I was trying to have it run with ANTRL 3.3. The syntax coloring worked, but it was having trouble reading files and sometimes outright failed.</p>\n\n<p>My second attempt was with <a href=\"https://github.com/antlr/grammars-v4/tree/master/stringtemplate\" rel=\"nofollow noreferrer\">this set of grammars</a>. They load all of the files properly since I could compile it with 4.5, but the syntax coloring is completely off. It looks like the grammars are more so built for Java than String Template v4.</p>\n\n<p>Here is the code I currently am working with to build the Lexer in the Netbeans module:</p>\n\n<p>Language Provider:</p>\n\n<pre><code>import org.netbeans.api.lexer.InputAttributes;\nimport org.netbeans.api.lexer.Language;\nimport org.netbeans.api.lexer.LanguagePath;\nimport org.netbeans.api.lexer.Token;\nimport org.netbeans.spi.lexer.LanguageEmbedding;\nimport org.netbeans.spi.lexer.LanguageProvider;\n\n/**\n *\n * @author Cory\n */\n@org.openide.util.lookup.ServiceProvider(service=org.netbeans.spi.lexer.LanguageProvider.class)\npublic class stLanguageProvider extends LanguageProvider {\n\n    @Override\n    public Language&lt;?&gt; findLanguage(String mimeType) {\n        if (\"text/x-st\".equals(mimeType)){\n            return new stLanguageHierarchy().language();\n        }\n\n        return null;\n    }\n\n    @Override\n    public LanguageEmbedding&lt;?&gt; findLanguageEmbedding(Token&lt;?&gt; token, LanguagePath languagePath, InputAttributes inputAttributes) {\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>Language Hierarchy:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport org.netbeans.api.lexer.Language;\nimport org.netbeans.spi.lexer.LanguageHierarchy;\nimport org.netbeans.spi.lexer.Lexer;\nimport org.netbeans.spi.lexer.LexerRestartInfo;\n\n/**\n *\n * @author Cory\n */\npublic class stLanguageHierarchy extends LanguageHierarchy&lt;stTokenId&gt; {\n\n    private static List&lt;stTokenId&gt; tokens = new ArrayList&lt;stTokenId&gt;();\n    private static Map&lt;Integer, stTokenId&gt; idToToken = new HashMap&lt;Integer, stTokenId&gt;();\n\n    private static final Language&lt;stTokenId&gt; language = new stLanguageHierarchy().language();\n\n    public static Language&lt;stTokenId&gt; getLanguage() {\n        return language;\n    }\n\n    static {\n        TokenType[] tokenTypes = TokenType.values();\n        for (TokenType tokenType : tokenTypes) {\n            tokens.add(new stTokenId(tokenType.name(), tokenType.category, tokenType.id));\n        }\n        for (stTokenId token : tokens) {\n            idToToken.put(token.ordinal(), token);\n        }\n    }\n\n    /**\n     * Returns an actual stTokenId from an id. This essentially allows\n     * the syntax highlighter to decide the color of specific words.\n     * @param id\n     * @return\n     */\n    static synchronized stTokenId getToken(int id) {\n        return idToToken.get(id);\n    }\n\n    @Override\n    protected Collection&lt;stTokenId&gt; createTokenIds() {\n        return tokens;\n    }\n\n    @Override\n    protected Lexer&lt;stTokenId&gt; createLexer(LexerRestartInfo&lt;stTokenId&gt; lri) {\n        return new stEditorLexer(lri);\n    }\n\n    @Override\n    protected String mimeType() {\n        return \"text/x-st\";\n    }\n}\n</code></pre>\n\n<p>The Editor lexer: This is where the String Template Lexer should be brought in if I can find it. This code here is using the lexer from ANTLR 4.5 build from the <a href=\"https://github.com/antlr/grammars-v4/tree/master/stringtemplate\" rel=\"nofollow noreferrer\">second link</a>.</p>\n\n<pre><code>import org.antlr.parser.st4.STLexer;\nimport org.antlr.v4.runtime.CommonTokenStream;\nimport org.antlr.v4.runtime.Token;\nimport org.netbeans.spi.lexer.Lexer;\nimport org.netbeans.spi.lexer.LexerInput;\nimport org.netbeans.spi.lexer.LexerRestartInfo;\nimport org.openide.util.Exceptions;\n\n/**\n *\n * @author Cory\n */\npublic class stEditorLexer implements Lexer&lt;stTokenId&gt; {\n\n    private static final String SOURCE_NAME = \"stEditor\";\n\n    private LexerRestartInfo&lt;stTokenId&gt; lri;\n    private STLexer lexer;\n\n    public stEditorLexer(LexerRestartInfo&lt;stTokenId&gt; lri) {\n        this.lri = lri;\n        try\n        {\n            LexerInput lexerInput = lri.input();\n            AntlrCharStream charStream = new AntlrCharStream(lexerInput, SOURCE_NAME);\n            lexer = new STLexer(charStream);\n            lexer.setDelimiters('$', '$');\n            lexer.setChannel(STLexer.OFF_CHANNEL);\n            lexer.reset();\n            AntlrLexerState state = (AntlrLexerState) lri.state();\n\n            if (state != null) {\n                state.apply(lexer);\n            }\n        }\n        catch(Exception ex)\n        {\n            Exceptions.printStackTrace(ex);\n        }\n    }\n\n    /**\n     * @return the next token recognized by the lexer or null if there are no\n     *         more characters (available in the input) to be tokenized.\n     */\n    @Override\n    public org.netbeans.api.lexer.Token&lt;stTokenId&gt; nextToken() {\n        Token token = lexer.nextToken();\n\n        stTokenId tokenId = null;\n\n        if (token.getType() != LexerInput.EOF) {\n            tokenId  = stLanguageHierarchy.getToken(token.getType());\n            System.out.println(\"nextToken - \" + tokenId.toString() + \" \" + token.getText());\n        }  else if (lri.input().readLength() &gt; 0) {\n            // Remaining chars on the input should be tokenized\n            // see https://netbeans.org/bugzilla/show_bug.cgi?id=240826\n            tokenId = stLanguageHierarchy.getToken(STLexer.HORZ_WS);\n            System.out.println(\"nextToken - ERROR (as WS)\");\n        }\n\n        if (tokenId == null) {\n            System.out.println(\"nextToken - EOF\");\n            return null;\n        }\n\n        // According to the method specification, this must *not* return any\n        // other Token instances than those obtained from the TokenFactory.\n        return lri.tokenFactory().createToken(tokenId);\n    }\n\n    @Override\n    public Object state() {\n        return new AntlrLexerState(lexer._mode, lexer._modeStack);\n    }\n\n    @Override\n    public void release() {\n    }\n}\n</code></pre>\n\n<p>The TokenType class I generated from the Tokens from the second link as well:</p>\n\n<pre><code>import org.netbeans.api.lexer.Language;\nimport org.netbeans.api.lexer.TokenId;\n\n/**\n *\n * @author Cory\n */\npublic enum TokenType implements TokenId {\n\n    DOC_COMMENT(1, \"other\"),\n    BLOCK_COMMENT(2, \"comment\"),\n    LINE_COMMENT(3, \"comment\"),\n    TMPL_COMMENT(4, \"comment\"),\n    HORZ_WS(5, \"other\"),\n    VERT_WS(6, \"other\"),\n    ESCAPE(7, \"separator\"),\n    LDELIM(8, \"specialCharacter\"),\n    RBRACE(9, \"separator\"),\n    TEXT(10, \"text\"),\n    LBRACE(11, \"separator\"),\n    RDELIM(12, \"specialCharacter\"),\n    STRING(13, \"string\"),\n    IF(14, \"keyword\"),\n    ELSEIF(15, \"keyword\"),\n    ELSE(16, \"keyword\"),\n    ENDIF(17, \"keyword\"),\n    SUPER(18, \"keyword\"),\n    END(19, \"keyword\"),\n    TRUE(20, \"keyword\"),\n    FALSE(21, \"keyword\"),\n    AT(22, \"keyword\"),\n    ELLIPSIS(23, \"keyword\"),\n    DOT(24, \"separator\"),\n    COMMA(25, \"separator\"),\n    COLON(26, \"separator\"),\n    SEMI(27, \"separator\"),\n    AND(28, \"keyword\"),\n    OR(29, \"keyword\"),\n    LPAREN(30, \"separator\"),\n    RPAREN(31, \"separator\"),\n    LBRACK(32, \"separator\"),\n    RBRACK(33, \"separator\"),\n    EQUALS(34, \"separator\"),\n    BANG(35, \"separator\"),\n    ERR_CHAR(36, \"keyword\"),\n    ID(37, \"keyword\"),\n    PIPE(38, \"separator\");\n\n    public int id;\n    public String category;\n    public String text;\n\n    private static final Language&lt;stTokenId&gt; langauge = new stLanguageHierarchy().language();\n\n    private TokenType(int id, String category) {\n        this.id = id;\n        this.category = category;\n    }\n\n    public static TokenType valueOf(int id) {\n        TokenType[] values = values();\n        for (TokenType value : values) {\n            if (value.id == id) {\n                return value;\n            }\n        }\n        throw new IllegalArgumentException(\"The id \" + id + \" is not recognized\");\n    }\n\n    @Override\n    public String primaryCategory() {\n        return category;\n    }\n\n    public static final Language&lt;stTokenId&gt; getLanguage() {\n        return langauge;\n    }\n}\n</code></pre>\n\n<p>Everything else such as the AntlrCharStream is code that I found to work with the ANTLR 4.5 library.</p>\n\n<p><strong>EDIT 2</strong>\nI thought adding some sample output would help to try and figure out what could be the problem.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oyFFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oyFFm.png\" alt=\"Sample of output\"></a></p>\n\n<p>This is the color scheme:</p>\n\n<pre><code>&lt;fontcolor name=\"keyword\"           foreColor=\"blue\" default=\"default\"/&gt;\n&lt;fontcolor name=\"comment\"           foreColor=\"green\" default=\"default\"/&gt;    \n&lt;fontcolor name=\"other\"             foreColor=\"gray\" default=\"default\"/&gt;    \n&lt;fontcolor name=\"specialCharacter\"  foreColor=\"orange\" default=\"default\"/&gt; \n&lt;fontcolor name=\"text\"              foreColor=\"pink\" default=\"default\"/&gt; \n&lt;fontcolor name=\"string\"            foreColor=\"red\" default=\"default\"/&gt; \n&lt;fontcolor name=\"separator\"         foreColor=\"magenta\" default=\"default\"/&gt; \n</code></pre>\n"
        },
        {
            "tags": [
                "d3.js",
                "data-visualization",
                "legend"
            ],
            "owner": {
                "reputation": 40,
                "user_id": 4963215,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/36152306424d0489c455219b932c2f7e?s=128&d=identicon&r=PG",
                "display_name": "ColdFish",
                "link": "https://stackoverflow.com/users/4963215/coldfish"
            },
            "is_answered": true,
            "view_count": 54,
            "accepted_answer_id": 49907103,
            "answer_count": 1,
            "score": 2,
            "last_activity_date": 1524142777,
            "creation_date": 1524064766,
            "question_id": 49903413,
            "body_markdown": "I created this sample heatmap: **[Plunker][1]**\r\n\r\nInitially I use a certain linear scale `colorScale1` to color the heatmap.\r\nWhen the user clicks on the legend, the color scale is updated and the threshold scale (`colorScale2`) is used.\r\n\r\nThis switch works well.\r\n\r\nNow I don&#39;t know how to change the legend for the `colorScale2`.\r\nThe ticks and the gradient for `colorScale2` are wrong. I looked for a `linearGradient` equivalent for `scaleThreshold` but I didn&#39;t find anything.\r\n\r\nThis is the code:\r\n\r\n    var itemSize = 20;\r\n    var cellBorderSize = 1;\r\n    var cellSize = itemSize - 1 + cellBorderSize;\r\n    \r\n    var margin = {top: 10, right: 10, bottom: 10, left: 10};\r\n    var width = 80 - margin.right - margin.left;\r\n    var height = 80 - margin.top - margin.bottom; \r\n    \r\n    var svg = d3.select(&#39;#heatmap&#39;)\r\n    \t.append(&#39;svg&#39;)\r\n    \t.attr(&#39;width&#39;, width + margin.left + margin.right)\r\n    \t.attr(&#39;height&#39;, height + margin.top + margin.bottom)\r\n    \t.append(&#39;g&#39;)\r\n    \t.attr(&#39;transform&#39;, &#39;translate(&#39; + margin.left + &#39;,&#39; + margin.top + &#39;)&#39;);\r\n    \r\n    var domain1 = [0, 80, 90, 95, 100];\r\n    var range1 = [&#39;#EC93AB&#39;, &#39;#CEB1DE&#39;, &#39;#95D3F0&#39;, &#39;#77EDD9&#39;, &#39;#A9FCAA&#39;]; \r\n    var colorScale1 = d3.scaleLinear()\r\n    \t.domain(domain1)\r\n    \t.range(range1);\r\n    \r\n    var domain2 = [0,\t95, 100];\r\n    var range2 = [&#39;white&#39;, &#39;lightgrey&#39;, &#39;grey&#39;]; \r\n    var colorScale2 = d3.scaleThreshold()\r\n    \t.domain(domain2)\r\n    \t.range(range2);\r\n    \r\n    svg.append(&#39;defs&#39;)\r\n    \t.append(&#39;pattern&#39;)\r\n    \t\t.attr(&#39;id&#39;, &#39;pattern-stripes&#39;)\r\n    \t\t.attr(&#39;patternUnits&#39;, &#39;userSpaceOnUse&#39;)\r\n    \t\t.attr(&#39;patternTransform&#39;, &#39;rotate(45)&#39;)\r\n    \t\t.attr(&#39;width&#39;, 3)\r\n    \t\t.attr(&#39;height&#39;, 3)\r\n    \t\t.append(&#39;rect&#39;)\r\n    \t\t\t.attr(&#39;width&#39;, 1)\r\n    \t\t\t.attr(&#39;height&#39;, 3)\r\n    \t\t\t.attr(&#39;transform&#39;, &#39;translate(0, 0)&#39;)\r\n    \t\t\t.attr(&#39;fill&#39;, &#39;black&#39;);\r\n    \r\n    ///////////////////////////////////////////////////////////\r\n    // Load data files.\r\n    ///////////////////////////////////////////////////////////\r\n    var files = [&#39;./data.csv&#39;];\r\n    var promises = [];\r\n    \r\n    promises.push(d3.csv(files[0]));\r\n    \r\n    Promise.all(promises)\r\n    \t.then(makeHeatmap)\r\n    \t.catch(function(err) {\r\n    \t\tconsole.log(&#39;Error loading files&#39;);\r\n    \t\tthrow err;\r\n    \t});\r\n    \r\n    ///////////////////////////////////////////////////////////\r\n    // Data heatmap\r\n    ///////////////////////////////////////////////////////////\r\n    function makeHeatmap(myData) {\r\n    \tvar data = myData[0]; \r\n    \r\n    \t// get each element of data file and creates an object\r\n       var data = data.map(function(item) {\r\n    \t\tvar newItem = {};\r\n    \t\tnewItem.name = item.NAME;\r\n    \t\tnewItem.year = item.YEAR;\r\n    \t\tnewItem.val = item.VAL;\r\n    \t\treturn newItem;\r\n    \t});\r\n    \r\n    \tvar names = data.map(function(d) {\r\n    \t\treturn d.name;\r\n    \t});\r\n    \tregionsName = d3.set(names).values();\r\n    \tnumRegions = regionsName.length; \r\n    \r\n    \tvar years = data.map(function(d) {\r\n    \t\treturn d.year;\r\n    \t});\r\n    \tyearsName = d3.set(years).values();\r\n    \tnumYears = yearsName.length; \r\n    \r\n    \t///////////////////////////////////////////////////////////\r\n    \t// Draw heatmap\r\n    \t///////////////////////////////////////////////////////////\r\n    \tvar cells = svg.selectAll(&#39;.cell&#39;)\r\n    \t\t.data(data)\r\n    \t\t.enter()\r\n    \t\t.append(&#39;g&#39;)\r\n    \t\t.append(&#39;rect&#39;)\r\n    \t\t.attr(&#39;data-value&#39;, function(d) { \r\n    \t\t\treturn d.val; \r\n    \t\t})\r\n    \t\t.attr(&#39;data-r&#39;, function(d) {\r\n    \t\t\tvar idr = regionsName.indexOf(d.name);\r\n    \t\t\treturn idr; \t\t\t\r\n    \t\t})\r\n    \t\t.attr(&#39;data-c&#39;, function(d, i) {\r\n    \t\t\tif(regionsName.includes(d.name) &amp; d.year == &#39;1990&#39;) var idc = 0;\r\n    \t\t\telse if(regionsName.includes(d.name) &amp;&amp; d.year == &#39;1991&#39;) var idc = 1;\r\n    \t\t\telse if(regionsName.includes(d.name) &amp;&amp; d.year == &#39;1992&#39;) var idc = 2;\r\n    \t\t\treturn idc; \r\n    \t\t})\r\n    \t\t.attr(&#39;class&#39;, function() {\r\n    \t\t\tvar idr = d3.select(this).attr(&#39;data-r&#39;); // row\r\n    \t\t\tvar idc = d3.select(this).attr(&#39;data-c&#39;); // column\r\n    \t\t\treturn &#39;cell cr&#39; + idr + &#39; cc&#39; + idc;\r\n    \t\t})\r\n    \t\t.attr(&#39;width&#39;, cellSize)\r\n    \t\t.attr(&#39;height&#39;, cellSize)\r\n    \t\t.attr(&#39;x&#39;, function(d) { \r\n    \t\t\tvar c = d3.select(this).attr(&#39;data-c&#39;);\r\n    \t\t\treturn c * cellSize;\r\n    \t\t})\r\n    \t\t.attr(&#39;y&#39;, function() { \r\n    \t\t\tvar r = d3.select(this).attr(&#39;data-r&#39;);\r\n    \t\t\treturn r * cellSize;\r\n    \t\t})\r\n    \t\t.attr(&#39;fill&#39;, function(d) {\r\n    \t\t\tvar col;\r\n    \t\t\tif(d.name == &#39;&#39;) {\r\n    \t\t\t\tcol = &#39;url(#pattern-stripes)&#39;;\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tcol = colorScale1(d.val); \r\n    \t\t\t}\r\n    \t\t\treturn col;\r\n    \t\t});\r\n    \r\n    } // end makeHeatmap\r\n    \r\n    ///////////////////////////////////////////////////////////\r\n    // Legend\r\n    ///////////////////////////////////////////////////////////\r\n    // create tick marks\r\n    var xLegend = d3.scaleLinear()\r\n    \t.domain([0, 100])\r\n    \t.range([10, 409]); // larghezza dei tick\r\n    \r\n    var axisLegend = d3.axisBottom(xLegend)\r\n    \t.tickSize(19) // height of ticks\r\n    \t.tickFormat(function(v, i) { // i is index of domain colorScale, v is the corrisponding value (v = domain[i])\r\n    \t\tif(v == 0) {\r\n    \t\t\treturn v + &#39;%&#39;;\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\treturn v;\r\n    \t\t}\r\n    \t})\r\n    \t.tickValues(colorScale1.domain());\r\n    \r\n    var svgLegend = d3.select(&#39;#legend&#39;).append(&#39;svg&#39;).attr(&#39;width&#39;, 600);\r\n    \r\n    // append title\r\n    svgLegend.append(&#39;text&#39;)\r\n    \t.attr(&#39;class&#39;, &#39;legendTitle&#39;)\r\n    \t.attr(&#39;x&#39;, 10)\r\n    \t.attr(&#39;y&#39;, 20)\r\n    \t.style(&#39;text-anchor&#39;, &#39;start&#39;)\r\n    \t.text(&#39;Legend title&#39;);\r\n    \r\n    // draw the rectangle and fill with gradient\r\n    svgLegend.append(&#39;rect&#39;)\r\n    \t.attr(&#39;class&#39;, &#39;legendRect&#39;)\r\n    \t.attr(&#39;x&#39;, 10) // position\r\n    \t.attr(&#39;y&#39;, 30)\r\n    \t.attr(&#39;width&#39;, 400) // larghezza fascia colorata\r\n    \t.attr(&#39;height&#39;, 15) // altezza fascia colorata\r\n    \t.style(&#39;fill&#39;, &#39;url(#linear-gradient1)&#39;)\r\n    \t.on(&#39;click&#39;, function() {\r\n    \t\tif(currentFill === &#39;1&#39;) {\r\n    \t\t\tupdateColor2();\r\n    \t\t\tcurrentFill = &#39;2&#39;;\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tupdateColor1();\r\n    \t\t\tcurrentFill = &#39;1&#39;;\r\n    \t\t}\t\t\r\n    \t});\r\n    \r\n    svgLegend\r\n    \t.attr(&#39;class&#39;, &#39;legendLinAxis&#39;)\r\n    \t.append(&#39;g&#39;)\r\n    \t.attr(&#39;class&#39;, &#39;legendLinG&#39;)\r\n    \t.attr(&#39;transform&#39;, &#39;translate(0, 30)&#39;) // 47 &#232; la posizione verticale dei tick (se l&#39;aumenti, scendono) (47 per farli partire sotto, 30 per farli partire da sopra)\r\n    \t.call(axisLegend);\r\n    \r\n    var defs = svgLegend.append(&#39;defs&#39;);\r\n    \r\n    // horizontal gradient and append multiple color stops by using D3&#39;s data/enter step\r\n    var linearGradient1 = defs.append(&#39;linearGradient&#39;)\r\n    \t.attr(&#39;id&#39;, &#39;linear-gradient1&#39;)\r\n    \t.attr(&#39;x1&#39;, &#39;0%&#39;).attr(&#39;y1&#39;, &#39;0%&#39;)\r\n    \t.attr(&#39;x2&#39;, &#39;100%&#39;).attr(&#39;y2&#39;, &#39;0%&#39;)\r\n    \t.selectAll(&#39;stop&#39;)\r\n    \t.data(colorScale1.domain())\r\n    \t.enter().append(&#39;stop&#39;)\r\n    \t.attr(&#39;offset&#39;, function(d) { \r\n    \t\treturn d + &#39;%&#39;; \r\n    \t})\r\n    \t.attr(&#39;stop-color&#39;, function(d) { \r\n    \t\treturn colorScale1(d); \r\n    \t});\r\n    \r\n    // horizontal gradient and append multiple color stops by using D3&#39;s data/enter step\r\n    var linearGradient2 = defs.append(&#39;linearGradient&#39;)\r\n    \t.attr(&#39;id&#39;, &#39;linear-gradient2&#39;)\r\n    \t.attr(&#39;x1&#39;, &#39;0%&#39;).attr(&#39;y1&#39;, &#39;0%&#39;)\r\n    \t.attr(&#39;x2&#39;, &#39;100%&#39;).attr(&#39;y2&#39;, &#39;0%&#39;)\r\n    \t.selectAll(&#39;stop&#39;)\r\n    \t.data(colorScale2.domain())\r\n    \t.enter().append(&#39;stop&#39;)\r\n    \t.attr(&#39;offset&#39;, function(d) { \r\n    \t\treturn d + &#39;%&#39;; \r\n    \t})\r\n    \t.attr(&#39;stop-color&#39;, function(d) { \r\n    \t\treturn colorScale2(d); \r\n    \t});\r\n    \r\n    // update the colors to a different color scale (colorScale1)\r\n    function updateColor1() {\r\n    \t// fill the legend rectangle\r\n    \tsvgLegend.select(&#39;.legendRect&#39;)\r\n    \t\t.style(&#39;fill&#39;, &#39;url(#linear-gradient1)&#39;);\r\n    \t// transition the cell colors\r\n    \tsvg.selectAll(&#39;.cell&#39;)\r\n    \t\t.transition().duration(1000)\r\n    \t\t.style(&#39;fill&#39;, function(d, i) { \r\n    \t\t\tvar col;\r\n    \t\t\tif(d.valuePol == &#39;&#39;) {\r\n    \t\t\t\tcol = &#39;url(#pattern-stripes)&#39;;\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tcol = colorScale1(d.val); \r\n    \t\t\t}\r\n    \t\t\treturn col;\r\n    \t\t});\r\n    }\r\n    \r\n    // update the colors to a different color scale (colorScale2)\r\n    function updateColor2() {\r\n    \t// fill the legend rectangle\r\n    \tsvgLegend.select(&#39;.legendRect&#39;)\r\n    \t\t.style(&#39;fill&#39;, &#39;url(#linear-gradient2)&#39;);\r\n    \t// transition the cell colors\r\n    \tsvg.selectAll(&#39;.cell&#39;)\r\n    \t\t.transition().duration(1000)\r\n    \t\t.style(&#39;fill&#39;, function(d, i) { \r\n    \t\t\tvar col;\r\n    \t\t\tif(d.valuePol == &#39;&#39;) {\r\n    \t\t\t\tcol = &#39;url(#pattern-stripes)&#39;;\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tcol = colorScale2(d.val); \r\n    \t\t\t}\r\n    \t\t\treturn col;\r\n    \t\t});\r\n    }\r\n    \r\n    // start set-up\r\n    updateColor1();\r\n    var currentFill = &#39;1&#39;;\r\n\r\n  [1]: http://plnkr.co/edit/f0opWm5jTyrDW8WthGgo",
            "link": "https://stackoverflow.com/questions/49903413/legend-that-updates-at-the-click-of-the-mouse",
            "title": "Legend that updates at the click of the mouse",
            "body": "<p>I created this sample heatmap: <strong><a href=\"http://plnkr.co/edit/f0opWm5jTyrDW8WthGgo\" rel=\"nofollow noreferrer\">Plunker</a></strong></p>\n\n<p>Initially I use a certain linear scale <code>colorScale1</code> to color the heatmap.\nWhen the user clicks on the legend, the color scale is updated and the threshold scale (<code>colorScale2</code>) is used.</p>\n\n<p>This switch works well.</p>\n\n<p>Now I don't know how to change the legend for the <code>colorScale2</code>.\nThe ticks and the gradient for <code>colorScale2</code> are wrong. I looked for a <code>linearGradient</code> equivalent for <code>scaleThreshold</code> but I didn't find anything.</p>\n\n<p>This is the code:</p>\n\n<pre><code>var itemSize = 20;\nvar cellBorderSize = 1;\nvar cellSize = itemSize - 1 + cellBorderSize;\n\nvar margin = {top: 10, right: 10, bottom: 10, left: 10};\nvar width = 80 - margin.right - margin.left;\nvar height = 80 - margin.top - margin.bottom; \n\nvar svg = d3.select('#heatmap')\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\nvar domain1 = [0, 80, 90, 95, 100];\nvar range1 = ['#EC93AB', '#CEB1DE', '#95D3F0', '#77EDD9', '#A9FCAA']; \nvar colorScale1 = d3.scaleLinear()\n    .domain(domain1)\n    .range(range1);\n\nvar domain2 = [0,   95, 100];\nvar range2 = ['white', 'lightgrey', 'grey']; \nvar colorScale2 = d3.scaleThreshold()\n    .domain(domain2)\n    .range(range2);\n\nsvg.append('defs')\n    .append('pattern')\n        .attr('id', 'pattern-stripes')\n        .attr('patternUnits', 'userSpaceOnUse')\n        .attr('patternTransform', 'rotate(45)')\n        .attr('width', 3)\n        .attr('height', 3)\n        .append('rect')\n            .attr('width', 1)\n            .attr('height', 3)\n            .attr('transform', 'translate(0, 0)')\n            .attr('fill', 'black');\n\n///////////////////////////////////////////////////////////\n// Load data files.\n///////////////////////////////////////////////////////////\nvar files = ['./data.csv'];\nvar promises = [];\n\npromises.push(d3.csv(files[0]));\n\nPromise.all(promises)\n    .then(makeHeatmap)\n    .catch(function(err) {\n        console.log('Error loading files');\n        throw err;\n    });\n\n///////////////////////////////////////////////////////////\n// Data heatmap\n///////////////////////////////////////////////////////////\nfunction makeHeatmap(myData) {\n    var data = myData[0]; \n\n    // get each element of data file and creates an object\n   var data = data.map(function(item) {\n        var newItem = {};\n        newItem.name = item.NAME;\n        newItem.year = item.YEAR;\n        newItem.val = item.VAL;\n        return newItem;\n    });\n\n    var names = data.map(function(d) {\n        return d.name;\n    });\n    regionsName = d3.set(names).values();\n    numRegions = regionsName.length; \n\n    var years = data.map(function(d) {\n        return d.year;\n    });\n    yearsName = d3.set(years).values();\n    numYears = yearsName.length; \n\n    ///////////////////////////////////////////////////////////\n    // Draw heatmap\n    ///////////////////////////////////////////////////////////\n    var cells = svg.selectAll('.cell')\n        .data(data)\n        .enter()\n        .append('g')\n        .append('rect')\n        .attr('data-value', function(d) { \n            return d.val; \n        })\n        .attr('data-r', function(d) {\n            var idr = regionsName.indexOf(d.name);\n            return idr;             \n        })\n        .attr('data-c', function(d, i) {\n            if(regionsName.includes(d.name) &amp; d.year == '1990') var idc = 0;\n            else if(regionsName.includes(d.name) &amp;&amp; d.year == '1991') var idc = 1;\n            else if(regionsName.includes(d.name) &amp;&amp; d.year == '1992') var idc = 2;\n            return idc; \n        })\n        .attr('class', function() {\n            var idr = d3.select(this).attr('data-r'); // row\n            var idc = d3.select(this).attr('data-c'); // column\n            return 'cell cr' + idr + ' cc' + idc;\n        })\n        .attr('width', cellSize)\n        .attr('height', cellSize)\n        .attr('x', function(d) { \n            var c = d3.select(this).attr('data-c');\n            return c * cellSize;\n        })\n        .attr('y', function() { \n            var r = d3.select(this).attr('data-r');\n            return r * cellSize;\n        })\n        .attr('fill', function(d) {\n            var col;\n            if(d.name == '') {\n                col = 'url(#pattern-stripes)';\n            }\n            else {\n                col = colorScale1(d.val); \n            }\n            return col;\n        });\n\n} // end makeHeatmap\n\n///////////////////////////////////////////////////////////\n// Legend\n///////////////////////////////////////////////////////////\n// create tick marks\nvar xLegend = d3.scaleLinear()\n    .domain([0, 100])\n    .range([10, 409]); // larghezza dei tick\n\nvar axisLegend = d3.axisBottom(xLegend)\n    .tickSize(19) // height of ticks\n    .tickFormat(function(v, i) { // i is index of domain colorScale, v is the corrisponding value (v = domain[i])\n        if(v == 0) {\n            return v + '%';\n        }\n        else {\n            return v;\n        }\n    })\n    .tickValues(colorScale1.domain());\n\nvar svgLegend = d3.select('#legend').append('svg').attr('width', 600);\n\n// append title\nsvgLegend.append('text')\n    .attr('class', 'legendTitle')\n    .attr('x', 10)\n    .attr('y', 20)\n    .style('text-anchor', 'start')\n    .text('Legend title');\n\n// draw the rectangle and fill with gradient\nsvgLegend.append('rect')\n    .attr('class', 'legendRect')\n    .attr('x', 10) // position\n    .attr('y', 30)\n    .attr('width', 400) // larghezza fascia colorata\n    .attr('height', 15) // altezza fascia colorata\n    .style('fill', 'url(#linear-gradient1)')\n    .on('click', function() {\n        if(currentFill === '1') {\n            updateColor2();\n            currentFill = '2';\n        }\n        else {\n            updateColor1();\n            currentFill = '1';\n        }       \n    });\n\nsvgLegend\n    .attr('class', 'legendLinAxis')\n    .append('g')\n    .attr('class', 'legendLinG')\n    .attr('transform', 'translate(0, 30)') // 47 Ã¨ la posizione verticale dei tick (se l'aumenti, scendono) (47 per farli partire sotto, 30 per farli partire da sopra)\n    .call(axisLegend);\n\nvar defs = svgLegend.append('defs');\n\n// horizontal gradient and append multiple color stops by using D3's data/enter step\nvar linearGradient1 = defs.append('linearGradient')\n    .attr('id', 'linear-gradient1')\n    .attr('x1', '0%').attr('y1', '0%')\n    .attr('x2', '100%').attr('y2', '0%')\n    .selectAll('stop')\n    .data(colorScale1.domain())\n    .enter().append('stop')\n    .attr('offset', function(d) { \n        return d + '%'; \n    })\n    .attr('stop-color', function(d) { \n        return colorScale1(d); \n    });\n\n// horizontal gradient and append multiple color stops by using D3's data/enter step\nvar linearGradient2 = defs.append('linearGradient')\n    .attr('id', 'linear-gradient2')\n    .attr('x1', '0%').attr('y1', '0%')\n    .attr('x2', '100%').attr('y2', '0%')\n    .selectAll('stop')\n    .data(colorScale2.domain())\n    .enter().append('stop')\n    .attr('offset', function(d) { \n        return d + '%'; \n    })\n    .attr('stop-color', function(d) { \n        return colorScale2(d); \n    });\n\n// update the colors to a different color scale (colorScale1)\nfunction updateColor1() {\n    // fill the legend rectangle\n    svgLegend.select('.legendRect')\n        .style('fill', 'url(#linear-gradient1)');\n    // transition the cell colors\n    svg.selectAll('.cell')\n        .transition().duration(1000)\n        .style('fill', function(d, i) { \n            var col;\n            if(d.valuePol == '') {\n                col = 'url(#pattern-stripes)';\n            }\n            else {\n                col = colorScale1(d.val); \n            }\n            return col;\n        });\n}\n\n// update the colors to a different color scale (colorScale2)\nfunction updateColor2() {\n    // fill the legend rectangle\n    svgLegend.select('.legendRect')\n        .style('fill', 'url(#linear-gradient2)');\n    // transition the cell colors\n    svg.selectAll('.cell')\n        .transition().duration(1000)\n        .style('fill', function(d, i) { \n            var col;\n            if(d.valuePol == '') {\n                col = 'url(#pattern-stripes)';\n            }\n            else {\n                col = colorScale2(d.val); \n            }\n            return col;\n        });\n}\n\n// start set-up\nupdateColor1();\nvar currentFill = '1';\n</code></pre>\n"
        },
        {
            "tags": [
                "java",
                "spring",
                "spring-boot",
                "undertow"
            ],
            "owner": {
                "reputation": 15,
                "user_id": 3420116,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/f7de5508a8debc8775571220c35e78fa?s=128&d=identicon&r=PG&f=1",
                "display_name": "asyncmind",
                "link": "https://stackoverflow.com/users/3420116/asyncmind"
            },
            "is_answered": false,
            "view_count": 71,
            "answer_count": 2,
            "score": 1,
            "last_activity_date": 1524142772,
            "creation_date": 1523297194,
            "last_edit_date": 1523342121,
            "question_id": 49739072,
            "body_markdown": "I am facing an unsolvable problem with my poor spring configuration knowledge: **every GET return error 404 and every POST return error 405**. \r\nMy spring security filters work well but neither @PostMapping or @GetMapping annotated methods are getting called.\r\n I have taken care of rename old property **server.context-path** to new name **server.servlet.context-path** but it still not working.\r\nI use undertow webserver:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${springBoot.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nMy app.properties file is really named application.mssql.properties:\r\n\r\n    ## Hibernate properties\r\n    ... some properties ...\r\n    \r\n    ##Spring boot properties\r\n    server.servlet.context-path =/my-context\r\n\r\n\r\n\r\nAnd this server instance configuration is in my ApplicationConfiguration:\r\n\r\n    @SpringBootApplication(scanBasePackages = { \r\n        &quot;t.i.DAO&quot;, \r\n        &quot;t.i.SERVICES&quot;,\r\n        &quot;t.i.config&quot;, \r\n        &quot;t.i.config.security&quot; })\r\n    @PropertySource({ &quot;classpath:application.mssql.properties&quot; })\r\n    @EnableCaching\r\n    @EnableTransactionManagement\r\n    public class ApplicationConfiguration {\r\n\r\n        // Properties of application.mssql.properties file\r\n        @Autowired\r\n\t    private Environment env;\r\n\r\n        ... some code there...\r\n\r\n       @Bean\r\n       public ConfigurableServletWebServerFactory undertowServerInstance() { \r\n        \tUndertowServletWebServerFactory customizer = new UndertowServletWebServerFactory();\r\n        \tcustomizer.addBuilderCustomizers((builder) -&gt; {\r\n        \t\tbuilder.setServerOption(UndertowOptions.ENABLE_HTTP2, true);\r\n        \t});\r\n\r\n            // EDIT: add: set the context by reading app.properties\r\n        \tcustomizer.setContextPath(env.getProperty(&quot;server.servlet.context-path&quot;));\r\n        \treturn customizer;\r\n       }\r\n    }\r\n\r\nNotice that with my old spring 1.5 configuration, the method undertowServerInstance() was different:\r\n\r\n    @Bean\r\n    public EmbeddedServletContainerCustomizer undertowServerInstance() {\r\n    \treturn (container) -&gt; {\r\n    \t\tif(container instanceof UndertowEmbeddedServletContainerFactory) {\r\n    \t\t\t((UndertowEmbeddedServletContainerFactory) container)\r\n    \t\t\t\t.addBuilderCustomizers(builder -&gt; builder.setServerOption(UndertowOptions.ENABLE_HTTP2, true));\r\n    \t\t}\r\n    \t};\r\n    }\r\n\r\n\r\nI use a Spring security configuration class SecurityConfig like this: \r\n\r\npackage t.i.config;\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true) // allows AOP @PreAuthorize and some other annotations to be applied to methods.\r\n    @EnableWebSecurity\r\n    @EnableScheduling // allows to run Spring schedulers and periodically run some tasks. We use scheduler for evicting EhCache tokens.\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\r\n    \t\t... some code for security configuration ...\r\n    \t\r\n    \t    // adding authentication filter\r\n    \t\thttp.addFilterBefore(new AuthenticationFilter(this.authenticationManager), BasicAuthenticationFilter.class);\r\n    \t\r\n    \t}\r\n    }\r\n\r\n\r\nThis class is used to generate a new token from user credentials or check token validity if it is present on header (this filter is called for every requests and it still work):\r\n\r\n    package t.i.config.security;\r\n    \r\n    public class AuthenticationFilter extends GenericFilterBean {\r\n    \r\n    \t@Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\t// check or create token. Exception if credentials or token invalid\r\n    \t\t}\r\n    \t\tcatch(AuthenticationException authenticationException){\r\n    \t\t\t((HttpServletResponse) http).sendError(HttpServletResponse.SC_UNAUTHORIZED, authenticationException.getMessage());\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tchain.doFilter(request, response);\r\n    \t}\r\n    }\r\n\r\n\r\nThis is my WebMvcConfig which contain @RestController classes package location (edit: **added implements WebMvcConfigurer**) :\r\n\r\n    package t.i.config;\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan(basePackages = {&quot;t.i.controllers&quot;})\r\n    public class WebMvcConfig implements WebMvcConfigurer {\r\n     ... code there ... \r\n    }\r\n\r\nAnd, for example, when I call `/api/authenticate` URL, my spring authentication filter method is called and token created but this WS is never called (returning 405 instead):\r\n\r\n    package t.i.controllers;\r\n    \r\n    @RestController\r\n    public class AuthenticationController {\r\n    \r\n     \r\n    \t@PostMapping(&quot;api/authenticate&quot;)\r\n    \tpublic UserDTO authenticate(AuthenticationWithToken principal) {\r\n    \r\n    \t\t... some code there that is never called with spring boot 2.0 ...\r\n\r\n    \t\treturn userDTO;\r\n    \t}\r\n    }\r\n\r\nI still don&#39;t understand this problem and I think something is missing in Undertow configuration.\r\n\r\nEDIT: In the `ApplicationConfiguration.undertowServerInstance()` method, if I remove the line:\r\n\r\n    // EDIT: add: set the context by reading app.properties\r\n    customizer.setContextPath(env.getProperty(&quot;server.servlet.context-path&quot;));\r\nThen the AuthenticationFilter is not triggered any more. With spring boot 1.5 I never need to explicitly specify Undertow context.\r\n\r\nEDIT: I changed my authentication WS method to GET:\r\n\r\n     package t.i.CONTROLLERS;\r\n    \r\n    @RestController\r\n    public class AuthenticationController {\r\n    \r\n    \t@RequestMapping(value = &quot;/api/authenticate&quot;, method = RequestMethod.GET)\r\n    \tpublic UserDTO authenticate(AuthenticationWithToken principal) {\r\n    \t\r\n    \t\t... some code there that is still never called with spring boot 2.0 ...\r\n    \t\t\r\n    \t\treturn userDTO;\r\n    \t}\r\n    }\r\n\r\nThe authentication filter works well but method `AuthenticationController.authenticate` is still not called. This is that I got with chrome debugger:\r\n\r\n[![Error 404 with Get request authentication][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P1nO2.jpg\r\n\r\nIn summary:&lt;ul&gt;\r\n &lt;li&gt;I have 404 error with get request and 405 with post&lt;/li&gt;\r\n &lt;li&gt;Undertow need the context to be set explicitly otherwise my Authentication filter is not called&lt;/li&gt;&lt;/ul&gt;\r\nIt&#39;s like spring does not handle any of my @RestController but they are still instanciated (I tested them with console print into constructor). ",
            "link": "https://stackoverflow.com/questions/49739072/405-error-on-webservices-calls-after-migrating-spring-boot-1-5-to-2-0",
            "title": "405 error on Webservices calls after migrating spring-boot 1.5 to 2.0",
            "body": "<p>I am facing an unsolvable problem with my poor spring configuration knowledge: <strong>every GET return error 404 and every POST return error 405</strong>. \nMy spring security filters work well but neither @PostMapping or @GetMapping annotated methods are getting called.\n I have taken care of rename old property <strong>server.context-path</strong> to new name <strong>server.servlet.context-path</strong> but it still not working.\nI use undertow webserver:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\n    &lt;version&gt;${springBoot.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>My app.properties file is really named application.mssql.properties:</p>\n\n<pre><code>## Hibernate properties\n... some properties ...\n\n##Spring boot properties\nserver.servlet.context-path =/my-context\n</code></pre>\n\n<p>And this server instance configuration is in my ApplicationConfiguration:</p>\n\n<pre><code>@SpringBootApplication(scanBasePackages = { \n    \"t.i.DAO\", \n    \"t.i.SERVICES\",\n    \"t.i.config\", \n    \"t.i.config.security\" })\n@PropertySource({ \"classpath:application.mssql.properties\" })\n@EnableCaching\n@EnableTransactionManagement\npublic class ApplicationConfiguration {\n\n    // Properties of application.mssql.properties file\n    @Autowired\n    private Environment env;\n\n    ... some code there...\n\n   @Bean\n   public ConfigurableServletWebServerFactory undertowServerInstance() { \n        UndertowServletWebServerFactory customizer = new UndertowServletWebServerFactory();\n        customizer.addBuilderCustomizers((builder) -&gt; {\n            builder.setServerOption(UndertowOptions.ENABLE_HTTP2, true);\n        });\n\n        // EDIT: add: set the context by reading app.properties\n        customizer.setContextPath(env.getProperty(\"server.servlet.context-path\"));\n        return customizer;\n   }\n}\n</code></pre>\n\n<p>Notice that with my old spring 1.5 configuration, the method undertowServerInstance() was different:</p>\n\n<pre><code>@Bean\npublic EmbeddedServletContainerCustomizer undertowServerInstance() {\n    return (container) -&gt; {\n        if(container instanceof UndertowEmbeddedServletContainerFactory) {\n            ((UndertowEmbeddedServletContainerFactory) container)\n                .addBuilderCustomizers(builder -&gt; builder.setServerOption(UndertowOptions.ENABLE_HTTP2, true));\n        }\n    };\n}\n</code></pre>\n\n<p>I use a Spring security configuration class SecurityConfig like this: </p>\n\n<p>package t.i.config;</p>\n\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(prePostEnabled = true) // allows AOP @PreAuthorize and some other annotations to be applied to methods.\n@EnableWebSecurity\n@EnableScheduling // allows to run Spring schedulers and periodically run some tasks. We use scheduler for evicting EhCache tokens.\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        ... some code for security configuration ...\n\n        // adding authentication filter\n        http.addFilterBefore(new AuthenticationFilter(this.authenticationManager), BasicAuthenticationFilter.class);\n\n    }\n}\n</code></pre>\n\n<p>This class is used to generate a new token from user credentials or check token validity if it is present on header (this filter is called for every requests and it still work):</p>\n\n<pre><code>package t.i.config.security;\n\npublic class AuthenticationFilter extends GenericFilterBean {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n\n        try {\n            // check or create token. Exception if credentials or token invalid\n        }\n        catch(AuthenticationException authenticationException){\n            ((HttpServletResponse) http).sendError(HttpServletResponse.SC_UNAUTHORIZED, authenticationException.getMessage());\n            return;\n        }\n\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n\n<p>This is my WebMvcConfig which contain @RestController classes package location (edit: <strong>added implements WebMvcConfigurer</strong>) :</p>\n\n<pre><code>package t.i.config;\n\n@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = {\"t.i.controllers\"})\npublic class WebMvcConfig implements WebMvcConfigurer {\n ... code there ... \n}\n</code></pre>\n\n<p>And, for example, when I call <code>/api/authenticate</code> URL, my spring authentication filter method is called and token created but this WS is never called (returning 405 instead):</p>\n\n<pre><code>package t.i.controllers;\n\n@RestController\npublic class AuthenticationController {\n\n\n    @PostMapping(\"api/authenticate\")\n    public UserDTO authenticate(AuthenticationWithToken principal) {\n\n        ... some code there that is never called with spring boot 2.0 ...\n\n        return userDTO;\n    }\n}\n</code></pre>\n\n<p>I still don't understand this problem and I think something is missing in Undertow configuration.</p>\n\n<p>EDIT: In the <code>ApplicationConfiguration.undertowServerInstance()</code> method, if I remove the line:</p>\n\n<pre><code>// EDIT: add: set the context by reading app.properties\ncustomizer.setContextPath(env.getProperty(\"server.servlet.context-path\"));\n</code></pre>\n\n<p>Then the AuthenticationFilter is not triggered any more. With spring boot 1.5 I never need to explicitly specify Undertow context.</p>\n\n<p>EDIT: I changed my authentication WS method to GET:</p>\n\n<pre><code> package t.i.CONTROLLERS;\n\n@RestController\npublic class AuthenticationController {\n\n    @RequestMapping(value = \"/api/authenticate\", method = RequestMethod.GET)\n    public UserDTO authenticate(AuthenticationWithToken principal) {\n\n        ... some code there that is still never called with spring boot 2.0 ...\n\n        return userDTO;\n    }\n}\n</code></pre>\n\n<p>The authentication filter works well but method <code>AuthenticationController.authenticate</code> is still not called. This is that I got with chrome debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P1nO2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P1nO2.jpg\" alt=\"Error 404 with Get request authentication\"></a></p>\n\n<p>In summary:<ul>\n <li>I have 404 error with get request and 405 with post</li>\n <li>Undertow need the context to be set explicitly otherwise my Authentication filter is not called</li></ul>\nIt's like spring does not handle any of my @RestController but they are still instanciated (I tested them with console print into constructor). </p>\n"
        },
        {
            "tags": [
                "angular"
            ],
            "owner": {
                "reputation": 3813,
                "user_id": 1765862,
                "user_type": "registered",
                "accept_rate": 68,
                "profile_image": "https://www.gravatar.com/avatar/3a746ea2091abf7d4373f86136d83091?s=128&d=identicon&r=PG",
                "display_name": "user1765862",
                "link": "https://stackoverflow.com/users/1765862/user1765862"
            },
            "is_answered": false,
            "view_count": 48,
            "answer_count": 2,
            "score": 0,
            "last_activity_date": 1524142769,
            "creation_date": 1512581453,
            "last_edit_date": 1512583634,
            "question_id": 47680190,
            "body_markdown": "I want to implement notification messages for my simple angular 2 app. I decided to use `ng2-toasty`. My simple angular 2 app is based on [ng2-admin theme][1].\r\n\r\n1. I installed package\r\n**`npm install ng2-toasty --save`**\r\n\r\n2. Import and register ToastyModule in the AppModule\r\n\r\n    \r\n\r\n&gt;     import { ToastyModule } from &#39;ng2-toasty&#39;;\r\n&gt;     ...\r\n&gt;      imports: [ \r\n&gt;         ToastyModule.forRoot(),\r\n&gt;     ]\r\n3. Inside Component I import again Toast service and injected inside constructor\r\n\r\n    import { ToastyService, ToastyConfig, ToastOptions, ToastData } from &#39;ng2-toasty&#39;;\r\n    constructor(private toastyService: ToastyService) { }\r\n    ... \r\n    // This error is raised on purpose inside some method\r\n    this.toastyService.error({\r\n          title: &#39;Error&#39;,\r\n          msg: &#39;An unexpected error occured!&#39;,\r\n          theme: &#39;default&#39;,\r\n          showClose: true,\r\n          timeout: 2000\r\n    }); \r\n    \r\nInside app.component.html\r\nI added on top of the file\r\n\r\n    &lt;ng2-toasty [position=&quot;&#39;top-right&#39;&quot;]&gt;&lt;/ng2-toasty&gt; \r\n\r\n\r\n&gt; I don&#39;t get any errors inside console but still notification message is not shown. \r\n&gt; I&#39;ve found several examples where I need to update `systemjs.config.js` or `webpack.config.vendor.js` files but inside this template I cannot find one. What I&#39;m missing here?\r\n\r\n\r\n\r\n  [1]: https://akveo.github.io/ng2-admin/articles/012-project-structure/",
            "link": "https://stackoverflow.com/questions/47680190/displaying-notification-messages-in-angular2-app-failes",
            "title": "Displaying notification messages in angular2 app failes",
            "body": "<p>I want to implement notification messages for my simple angular 2 app. I decided to use <code>ng2-toasty</code>. My simple angular 2 app is based on <a href=\"https://akveo.github.io/ng2-admin/articles/012-project-structure/\" rel=\"nofollow noreferrer\">ng2-admin theme</a>.</p>\n\n<ol>\n<li><p>I installed package\n<strong><code>npm install ng2-toasty --save</code></strong></p></li>\n<li><p>Import and register ToastyModule in the AppModule</p></li>\n</ol>\n\n<blockquote>\n<pre><code>import { ToastyModule } from 'ng2-toasty';\n...\n imports: [ \n    ToastyModule.forRoot(),\n]\n</code></pre>\n  \n  <p>3. Inside Component I import again Toast service and injected inside constructor</p>\n</blockquote>\n\n<pre><code>import { ToastyService, ToastyConfig, ToastOptions, ToastData } from 'ng2-toasty';\nconstructor(private toastyService: ToastyService) { }\n... \n// This error is raised on purpose inside some method\nthis.toastyService.error({\n      title: 'Error',\n      msg: 'An unexpected error occured!',\n      theme: 'default',\n      showClose: true,\n      timeout: 2000\n}); \n</code></pre>\n\n<p>Inside app.component.html\nI added on top of the file</p>\n\n<pre><code>&lt;ng2-toasty [position=\"'top-right'\"]&gt;&lt;/ng2-toasty&gt; \n</code></pre>\n\n<blockquote>\n  <p>I don't get any errors inside console but still notification message is not shown. \n  I've found several examples where I need to update <code>systemjs.config.js</code> or <code>webpack.config.vendor.js</code> files but inside this template I cannot find one. What I'm missing here?</p>\n</blockquote>\n"
        },
        {
            "tags": [
                "json",
                "node.js",
                "arangodb",
                "stylus"
            ],
            "owner": {
                "reputation": 84,
                "user_id": 9317334,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/487f1dc3500fe35edf63200617d901a0?s=128&d=identicon&r=PG&f=1",
                "display_name": "Lieblingsmensch",
                "link": "https://stackoverflow.com/users/9317334/lieblingsmensch"
            },
            "is_answered": true,
            "view_count": 77,
            "accepted_answer_id": 48694480,
            "answer_count": 2,
            "score": 2,
            "last_activity_date": 1524142762,
            "creation_date": 1517843219,
            "question_id": 48625500,
            "body_markdown": "I want to store Stylus in JSON, so it would look something like:\r\n\r\n    {\r\n      &quot;file&quot;: &quot;main&quot;,\r\n      &quot;content:&quot; &quot;body\r\n                      font: 12px Helvetica, Arial, sans-serif;\r\n\r\n                  a.button\r\n                      -webkit-border-radius: 5px;\r\n                      -moz-border-radius: 5px;\r\n                      border-radius: 5px;&quot;\r\n    }\r\n\r\nbut I understand that its impossible to store with out using the /n is there any way I can format the tabbing / identation automatically so it can be stored and retrieved from a document database i.e. MongoDB or ArangoDB.",
            "link": "https://stackoverflow.com/questions/48625500/storing-stylus-in-json-document-database",
            "title": "Storing stylus in JSON / Document database",
            "body": "<p>I want to store Stylus in JSON, so it would look something like:</p>\n\n<pre><code>{\n  \"file\": \"main\",\n  \"content:\" \"body\n                  font: 12px Helvetica, Arial, sans-serif;\n\n              a.button\n                  -webkit-border-radius: 5px;\n                  -moz-border-radius: 5px;\n                  border-radius: 5px;\"\n}\n</code></pre>\n\n<p>but I understand that its impossible to store with out using the /n is there any way I can format the tabbing / identation automatically so it can be stored and retrieved from a document database i.e. MongoDB or ArangoDB.</p>\n"
        },
        {
            "tags": [
                "c",
                "nodes",
                "doubly-linked-list",
                "abstract-data-type"
            ],
            "owner": {
                "reputation": 80,
                "user_id": 9644748,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/ab3de5bf421bad031c78a7001b1e1a4a?s=128&d=identicon&r=PG&f=1",
                "display_name": "lemonsss",
                "link": "https://stackoverflow.com/users/9644748/lemonsss"
            },
            "is_answered": false,
            "view_count": 45,
            "answer_count": 0,
            "score": 0,
            "last_activity_date": 1524142757,
            "creation_date": 1524141081,
            "last_edit_date": 1524141492,
            "question_id": 49921201,
            "body_markdown": "Hey am trying to implement a generic list iterator that can store elements of any type. It has other files to tackle positive integer types and string types. The file compiles properly. However,when i add the nodes to the list and print it as a list where the first node entered is at the last of the list and the last node entered is at the start of the list(like prepending the list)(The code is tested in test case 2 below),it just &quot;forgets&quot; the first node entered.I even tried to move from the first element of the list and print one by one but it seems like the first node entered is just not there&lt;br&gt;&lt;br&gt;\r\nThis is the add function:\r\n\r\n    int  add(IteratorG it, void *vp){\r\n  \r\n      Node *temp;\r\n      if ((temp = malloc(sizeof(Node))) == NULL) { \r\n        return 0; \r\n      }\r\n  \r\n      temp-&gt;value = it-&gt;newElm(vp);\r\n  \r\n  \r\n      if(it-&gt;curr!=NULL)\r\n      {    \r\n  \r\n      temp-&gt;next=it-&gt;curr;\r\n      it-&gt;curr-&gt;prev=temp;\r\n      it-&gt;curr=temp;\r\n      }\r\n  \r\n      if(it-&gt;curr==NULL){\r\n  \r\n      it-&gt;curr=temp;\r\n      it-&gt;curr-&gt;next=NULL;\r\n      }  \r\n \r\n      return 1;\r\n    }\r\n\r\nI am using a Linux environment and the errors are indicative from the results. Here is the code for the whole program:\r\n\r\n    #include &lt;stdlib.h&gt;\r\n    #include &lt;stdio.h&gt;\r\n    #include &lt;assert.h&gt;\r\n    #include &quot;iteratorG.h&quot;\r\n\r\n    typedef struct Node {\r\n\r\n      void *value;  // value of thee list item\r\n      struct Node *prev;\r\n      // pointer previous node in list\r\n      struct Node *next;\r\n      // pointer to next node in list\r\n  \r\n      // implemented struct here .. \r\n    } Node;\r\n\r\n    typedef struct IteratorGRep {\r\n\r\n      int  numofit;      // count of items in list\r\n      Node *head;         // first node in list\r\n      Node *curr;       // current node in list\r\n      Node *tail;       // last node in list\r\n  \r\n      ElmCompareFp  cmpElm;\r\n      ElmNewFp  newElm;\r\n      ElmFreeFp freeElm;\r\n\r\n      // implemented struct here .. \r\n\r\n    } IteratorGRep;\r\n\r\n\r\n    /*\r\n  \r\n  \r\n      //Your  functions below .... \r\n     */\r\n\r\n\r\n    IteratorG newIterator(ElmCompareFp cmpFp, ElmNewFp newFp, ElmFreeFp freeFp){\r\n\t\r\n    \tIteratorG newit;\r\n  \r\n   \r\n      if ((newit = malloc(sizeof (struct IteratorGRep)))==NULL)\r\n      {\r\n        printf(&quot;Error...! \\n&quot;);\r\n    \r\n      }\r\n\r\n      //assert (newit != NULL);\r\n      newit-&gt;numofit = 0;\r\n      newit-&gt;head = NULL;\r\n      newit-&gt;tail = NULL;\r\n      newit-&gt;curr = NULL;\r\n      newit-&gt;cmpElm=cmpFp;\r\n      newit-&gt;newElm=newFp;\r\n      newit-&gt;freeElm=freeFp;\r\n      return newit;\r\n\t\r\n    \t// implemented function here and changed return value \r\n    }\r\n\r\n\r\n\r\n    int  add(IteratorG it, void *vp){\r\n  \r\n      Node *temp;\r\n      if ((temp = malloc(sizeof(Node))) == NULL) { \r\n        return 0; \r\n      }\r\n  \r\n      temp-&gt;value = it-&gt;newElm(vp);\r\n      temp-&gt;next=NULL;\r\n  \r\n      if(it-&gt;curr==NULL)\r\n      {\r\n        //temp-&gt;next=it-&gt;curr;\r\n        it-&gt;curr=temp;\r\n        it-&gt;tail=it-&gt;head=it-&gt;curr;\r\n      }  \r\n  \r\n      temp-&gt;next=it-&gt;curr;\r\n      it-&gt;curr-&gt;prev=temp;\r\n      it-&gt;curr=temp;\r\n      it-&gt;head=it-&gt;curr;\r\n      //it-&gt;curr-&gt;prev=temp;\r\n      /*temp-&gt;next = it-&gt;curr;\r\n      it-&gt;curr = temp;\r\n      */\r\n  \t    // add node to list from front \r\n\t    return 1;\r\n    }\r\n    int  hasNext(IteratorG it){\r\n\r\n      if(it-&gt;curr-&gt;next==NULL)\r\n       {\r\n         return 0;\r\n       }\r\n  \r\n \r\n      \t// check if theres next element/node\r\n\t    return 1;\r\n    }\r\n    int  hasPrevious(IteratorG it){\r\n\t\r\n    \tif(it-&gt;curr-&gt;prev!=NULL)\r\n    \t{\r\n    \t  return 1;\r\n    \t}\r\n    \t// check if theres previous element/node \r\n    \treturn 0;\r\n    }\r\n    void *next(IteratorG it){\r\n\r\n      Node *tempo;\r\n  \r\n      if(it-&gt;curr-&gt;next==NULL)\r\n      {\r\n        return NULL;\r\n      }\r\n      tempo=it-&gt;curr;\r\n      it-&gt;curr=it-&gt;curr-&gt;next;\r\n  \r\n      // implemented function here  \r\n      return tempo-&gt;value;\r\n    }\r\n    void *previous(IteratorG it){\r\n\t\r\n\t    Node *tempor;\r\n      \r\n      tempor=it-&gt;curr;\r\n      if(tempor-&gt;prev==NULL)\r\n      {\r\n        return NULL;\r\n      }\r\n      tempor=it-&gt;curr-&gt;prev;\r\n  \r\n      it-&gt;curr=it-&gt;curr-&gt;prev;\r\n      //tempor=it-&gt;curr;\r\n\r\n      // move to next node in list  \r\n      return tempor-&gt;value;\r\n    }\r\n    int  del(IteratorG it){\r\n      if(it-&gt;curr-&gt;prev!=NULL)\r\n      {\r\n        Node *temp_curr=it-&gt;curr;\r\n        Node *temp_prev=it-&gt;curr-&gt;prev-&gt;prev;\r\n        temp_curr-&gt;prev=temp_prev;\r\n        temp_prev-&gt;next=temp_curr;\r\n        return 1;\r\n    \r\n      }// delete previous node  from list \r\n      else\r\n        return 0;\r\n    }\r\n    int  set(IteratorG it, void *vp){\r\n      if(it-&gt;curr-&gt;prev!=NULL)\r\n      {\r\n  \r\n      it-&gt;curr-&gt;prev-&gt;value=vp;\r\n  \r\n  \r\n      /*  \r\n    \r\n      Node *wep;\r\n      if ((wep = malloc(sizeof(Node))) == NULL) { \r\n          return 0; \r\n      }  \r\n  \r\n\r\n      wep-&gt;value=it-&gt;newElm(vp);  \r\n  \r\n  \r\n      store_next=it-&gt;curr;\r\n      store_prev=it-&gt;curr-&gt;prev-&gt;prev;\r\n      store_next-&gt;prev=wep;\r\n       wep-&gt;next=store_next;\r\n  \r\n      store_prev-&gt;next=wep;\r\n      wep-&gt;prev=store_prev;\r\n      */\r\n\r\n  \r\n      return 1;\r\n      }\r\n\t    // change previous node value with new \r\n\t    return 0;\r\n    }\r\n    IteratorG advance(IteratorG it, int n){\r\n  \r\n  \r\n  \r\n    \t//To be implemented\r\n        //move forward by n times\r\n    \treturn NULL;\r\n    }\r\n    void reverse(IteratorG it){\r\n      Node *curr = it-&gt;head;\r\n      Node *temp = NULL;\r\n      while(curr != NULL) {\r\n        temp = curr-&gt;next;\r\n        curr-&gt;next = curr-&gt;prev;\r\n        curr-&gt;prev = temp;\r\n        curr = temp;\r\n      }\r\n      temp = it-&gt;head;\r\n      it-&gt;head = it-&gt;tail;\r\n      it-&gt;tail = temp;// reverse elements of whole list\r\n    }\r\n    IteratorG find(IteratorG it, int (*fp) (void *vp) ){\r\n    \t// To be implemented \r\n    \t// Find elements of vp in list after current position and put in new list.return the list.\r\n          return NULL;\r\n     }\r\n    int distanceFromStart(IteratorG it){\r\n  \r\n      Node *c=it-&gt;curr;\r\n      int count=0;\r\n\r\n  \r\n      while(c-&gt;prev!=NULL)\r\n      {\r\n        c=c-&gt;prev;\r\n        count++;\r\n      }\r\n      return count;\r\n\t    // count number of elements from start of list to current position \r\n\r\n    }\r\n    int distanceToEnd(IteratorG it){\r\n\r\n      Node *cu=it-&gt;curr;\r\n      int count=0;\r\n\r\n      while(cu-&gt;next!=NULL)\r\n      {\r\n        cu=cu-&gt;next;\r\n        count++;\r\n      }\r\n      return count;\r\n        // count number of elements from end of list to current position\r\n    }\r\n    void reset(IteratorG it){\r\n  \r\n  \r\n  \r\n      while(it-&gt;curr-&gt;prev!=NULL)\r\n      {\r\n    \r\n        it-&gt;curr=it-&gt;curr-&gt;prev;\r\n     \r\n      }\r\n      return;\r\n\t    // move current position to start of list\r\n\t\r\n    }\r\n     void freeIt(IteratorG it){\r\n      assert(it != NULL);\r\n      Node *curr, *prev;\r\n      curr = it-&gt;head;\r\n      while (curr != NULL) {\r\n        prev = curr;\r\n        curr = curr-&gt;next;\r\n        free(prev-&gt;value);\r\n        free(prev);\r\n      }\r\n      free(it); // free items  \r\n\r\n    }\r\nThis is the header file for the code:\r\n\r\n    #ifndef LISTITERATORG_H\r\n    #define LISTITERATORG_H\r\n\r\n    #include &lt;stdio.h&gt;\r\n\r\n    typedef struct IteratorGRep *IteratorG;\r\n\r\n    typedef int   (*ElmCompareFp)(void const *e1, void const *e2);\r\n    typedef void *(*ElmNewFp)(void const *e1);\r\n    typedef void  (*ElmFreeFp)(void *e1);\r\n\r\n\r\n    IteratorG newIterator(ElmCompareFp cmpFp, ElmNewFp newFp, ElmFreeFp freeFp);\r\n    int  add(IteratorG it, void *vp);\r\n    int  hasNext(IteratorG it);\r\n    int  hasPrevious(IteratorG it);\r\n    void *next(IteratorG it);\r\n    void *previous(IteratorG it);\r\n    int  del(IteratorG it);\r\n    int  set(IteratorG it, void *vp);\r\n    IteratorG advance(IteratorG it, int n);\r\n    void reverse(IteratorG it);\r\n    IteratorG find(IteratorG it, int (*fp) (void *vp) );\r\n    int distanceFromStart(IteratorG it);\r\n    int distanceToEnd(IteratorG it);\r\n    void reset(IteratorG it);\r\n    void freeIt(IteratorG it);\r\n\r\n    #endif\r\nOne of the functions have yet to be implemented and is indicated in the code itself. But I guess that might not be the source of issue here. I perceive that the add function is not being utilized properly here.\r\n\r\nEDIT:\r\nheres the test case code. Theres no errors in the test case code just in the program above only :\r\n\r\n    #include &lt;stdlib.h&gt;\r\n    #include &lt;stdio.h&gt;\r\n    #include &lt;assert.h&gt;\r\n    #include &lt;string.h&gt;\r\n    #include &quot;iteratorG.h&quot;\r\n    #include &quot;positiveIntType.h&quot;\r\n    #include &quot;stringType.h&quot; \r\n\r\n    #define MAXARRAY 5\r\n\r\n    /* Helper Functions Below */\r\n\r\n    /* Returns 1 if marks &gt;= 50, 0 otherwise  */\r\n    int passMarks(void *marks){\r\n      return (*((int *) marks) &gt;= 50); \r\n  \r\n      /* Easy to understand below .. \r\n         int *ip = (int *) marks;\r\n         if(*ip &gt;= 50) { return 1; }\r\n         else { return 0; } \r\n      */\r\n    }\r\n\r\n    /* Returns 1 if str starts with &quot;jo&quot; */\r\n    int prefixJo(void *str){\r\n      return (strncmp(&quot;jo&quot;, (char *) str, 2) == 0) ; \r\n    }\r\n\r\n    /* A function to print a string from a void pointer */\r\n    void prnStr(void *vp){\r\n      assert(vp != NULL);\r\n      printf(&quot; %s&quot;, (char *) vp );  \t\r\n    }\r\n\r\n    /* A function to print an integer from a void pointer */\r\n    void prnInt(void *vp){\r\n      assert(vp != NULL);\r\n      printf(&quot; %d&quot;, *((int *) vp) );  \t\r\n    }\r\n\r\n    /* Prints previous element using the given function &#39;fp&#39;\r\n       examples: prnPrev(it1, prnInt); prnPrev(it2, prnStr);\r\n    */\r\n    void prnPrev(IteratorG it, void (*fp) (void *p) ){\r\n      void *prevP = previous(it);\r\n      assert(prevP != NULL);\r\n      printf(&quot;&gt; Previous value is: &quot;); \r\n      fp(prevP);\r\n      printf(&quot;\\n&quot;); \r\n    }\r\n\r\n    /* Prints next element using the given function &#39;fp&#39;\r\n       examples:   prnNext(it1, prnInt); prnNext(it2, prnStr);\r\n    */\r\n    void prnNext(IteratorG it, void (*fp) (void *p) ){\r\n      void *nextP = next(it);\r\n      assert(nextP != NULL);\r\n      printf(&quot;&gt; Next value is: &quot;); \r\n      fp(nextP);\r\n      printf(&quot;\\n&quot;); \r\n    }\r\n\r\n    /* Prints elements of &#39;it&#39; from current to last position \r\n       using the given function &#39;fp&#39;. The current position \r\n       of &#39;it&#39; will change to the end of the list.\r\n       examples: prnIt(it1, prnInt); prnIt(it2, prnStr);\r\n    */\r\n    void prnIt(IteratorG it, void (*fp) (void *p) ){\r\n      int count = 0;\r\n      while(hasNext(it)){\r\n        void *nextP = next(it);\t\r\n        count++;\r\n        if(count &gt; 1) { printf(&quot;, &quot;); }\r\n        fp(nextP); \t\t\r\n      }\r\n      printf(&quot;\\n&quot;); \r\n    }\r\n\r\n\r\n    /* Few Tests Below  */\r\n\r\n    void test1(){\r\n      printf(&quot;\\n--====  Test-01       ====------\\n&quot;);\r\n      IteratorG it1 = newIterator(positiveIntCompare, positiveIntNew,  positiveIntFree);\r\n      int a[MAXARRAY] = { 25, 78, 6, 82 , 11};\r\n      for(int i=0; i&lt;MAXARRAY; i++){\r\n        int result = add(it1 , &amp;a[i]); \r\n        printf(&quot;&gt; Inserting %d: %s \\n&quot;, a[i], (result==1 ? &quot;Success&quot; : &quot;Failed&quot;) );\r\n      }\r\n      freeIt(it1);\r\n      printf(&quot;--====  End of Test-01 ====------\\n&quot;);\r\n    }\r\n\r\n    void test2(){\r\n      printf(&quot;\\n--====  Test-02       ====------\\n&quot;);\r\n      IteratorG it1 = newIterator(positiveIntCompare, positiveIntNew, positiveIntFree);\r\n      int a[MAXARRAY] = { 72, 14, 62, 8, 93};\r\n      for(int i=0; i&lt;MAXARRAY; i++){\r\n        int result = add(it1 , &amp;a[i]); \r\n        printf(&quot;&gt; Inserting %d: %s \\n&quot;, a[i], (result==1 ? &quot;Success&quot; : &quot;Failed&quot;) );\r\n      }\r\n  \r\n      prnNext(it1, prnInt);\r\n      prnNext(it1, prnInt);\r\n      prnPrev(it1, prnInt);\r\n  \r\n      int newVal1 = 55;\r\n      int result1 = set(it1, &amp;newVal1);\r\n      printf(&quot;&gt; Set value: %d ; return val: %d \\n&quot;, newVal1,  result1 );  \r\n  \r\n      prnPrev(it1, prnInt);\r\n\r\n      freeIt(it1);\r\n      printf(&quot;--====  End of Test-02 ====------\\n&quot;);\r\n    }\r\n\r\n    \r\n\r\n    int main(int argc, char *argv[])\r\n    {\r\n  \r\n  \r\n      test1();\r\n      test2();\r\n\r\n      return EXIT_SUCCESS;\r\n  \r\n    }",
            "link": "https://stackoverflow.com/questions/49921201/first-node-added-to-doubly-linked-list-is-missing",
            "title": "First node added to doubly linked list is missing",
            "body": "<p>Hey am trying to implement a generic list iterator that can store elements of any type. It has other files to tackle positive integer types and string types. The file compiles properly. However,when i add the nodes to the list and print it as a list where the first node entered is at the last of the list and the last node entered is at the start of the list(like prepending the list)(The code is tested in test case 2 below),it just \"forgets\" the first node entered.I even tried to move from the first element of the list and print one by one but it seems like the first node entered is just not there<br><br>\nThis is the add function:</p>\n\n<pre><code>int  add(IteratorG it, void *vp){\n\n  Node *temp;\n  if ((temp = malloc(sizeof(Node))) == NULL) { \n    return 0; \n  }\n\n  temp-&gt;value = it-&gt;newElm(vp);\n\n\n  if(it-&gt;curr!=NULL)\n  {    \n\n  temp-&gt;next=it-&gt;curr;\n  it-&gt;curr-&gt;prev=temp;\n  it-&gt;curr=temp;\n  }\n\n  if(it-&gt;curr==NULL){\n\n  it-&gt;curr=temp;\n  it-&gt;curr-&gt;next=NULL;\n  }  \n\n  return 1;\n}\n</code></pre>\n\n<p>I am using a Linux environment and the errors are indicative from the results. Here is the code for the whole program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n#include \"iteratorG.h\"\n\ntypedef struct Node {\n\n  void *value;  // value of thee list item\n  struct Node *prev;\n  // pointer previous node in list\n  struct Node *next;\n  // pointer to next node in list\n\n  // implemented struct here .. \n} Node;\n\ntypedef struct IteratorGRep {\n\n  int  numofit;      // count of items in list\n  Node *head;         // first node in list\n  Node *curr;       // current node in list\n  Node *tail;       // last node in list\n\n  ElmCompareFp  cmpElm;\n  ElmNewFp  newElm;\n  ElmFreeFp freeElm;\n\n  // implemented struct here .. \n\n} IteratorGRep;\n\n\n/*\n\n\n  //Your  functions below .... \n */\n\n\nIteratorG newIterator(ElmCompareFp cmpFp, ElmNewFp newFp, ElmFreeFp freeFp){\n\n    IteratorG newit;\n\n\n  if ((newit = malloc(sizeof (struct IteratorGRep)))==NULL)\n  {\n    printf(\"Error...! \\n\");\n\n  }\n\n  //assert (newit != NULL);\n  newit-&gt;numofit = 0;\n  newit-&gt;head = NULL;\n  newit-&gt;tail = NULL;\n  newit-&gt;curr = NULL;\n  newit-&gt;cmpElm=cmpFp;\n  newit-&gt;newElm=newFp;\n  newit-&gt;freeElm=freeFp;\n  return newit;\n\n    // implemented function here and changed return value \n}\n\n\n\nint  add(IteratorG it, void *vp){\n\n  Node *temp;\n  if ((temp = malloc(sizeof(Node))) == NULL) { \n    return 0; \n  }\n\n  temp-&gt;value = it-&gt;newElm(vp);\n  temp-&gt;next=NULL;\n\n  if(it-&gt;curr==NULL)\n  {\n    //temp-&gt;next=it-&gt;curr;\n    it-&gt;curr=temp;\n    it-&gt;tail=it-&gt;head=it-&gt;curr;\n  }  \n\n  temp-&gt;next=it-&gt;curr;\n  it-&gt;curr-&gt;prev=temp;\n  it-&gt;curr=temp;\n  it-&gt;head=it-&gt;curr;\n  //it-&gt;curr-&gt;prev=temp;\n  /*temp-&gt;next = it-&gt;curr;\n  it-&gt;curr = temp;\n  */\n    // add node to list from front \n    return 1;\n}\nint  hasNext(IteratorG it){\n\n  if(it-&gt;curr-&gt;next==NULL)\n   {\n     return 0;\n   }\n\n\n    // check if theres next element/node\n    return 1;\n}\nint  hasPrevious(IteratorG it){\n\n    if(it-&gt;curr-&gt;prev!=NULL)\n    {\n      return 1;\n    }\n    // check if theres previous element/node \n    return 0;\n}\nvoid *next(IteratorG it){\n\n  Node *tempo;\n\n  if(it-&gt;curr-&gt;next==NULL)\n  {\n    return NULL;\n  }\n  tempo=it-&gt;curr;\n  it-&gt;curr=it-&gt;curr-&gt;next;\n\n  // implemented function here  \n  return tempo-&gt;value;\n}\nvoid *previous(IteratorG it){\n\n    Node *tempor;\n\n  tempor=it-&gt;curr;\n  if(tempor-&gt;prev==NULL)\n  {\n    return NULL;\n  }\n  tempor=it-&gt;curr-&gt;prev;\n\n  it-&gt;curr=it-&gt;curr-&gt;prev;\n  //tempor=it-&gt;curr;\n\n  // move to next node in list  \n  return tempor-&gt;value;\n}\nint  del(IteratorG it){\n  if(it-&gt;curr-&gt;prev!=NULL)\n  {\n    Node *temp_curr=it-&gt;curr;\n    Node *temp_prev=it-&gt;curr-&gt;prev-&gt;prev;\n    temp_curr-&gt;prev=temp_prev;\n    temp_prev-&gt;next=temp_curr;\n    return 1;\n\n  }// delete previous node  from list \n  else\n    return 0;\n}\nint  set(IteratorG it, void *vp){\n  if(it-&gt;curr-&gt;prev!=NULL)\n  {\n\n  it-&gt;curr-&gt;prev-&gt;value=vp;\n\n\n  /*  \n\n  Node *wep;\n  if ((wep = malloc(sizeof(Node))) == NULL) { \n      return 0; \n  }  \n\n\n  wep-&gt;value=it-&gt;newElm(vp);  \n\n\n  store_next=it-&gt;curr;\n  store_prev=it-&gt;curr-&gt;prev-&gt;prev;\n  store_next-&gt;prev=wep;\n   wep-&gt;next=store_next;\n\n  store_prev-&gt;next=wep;\n  wep-&gt;prev=store_prev;\n  */\n\n\n  return 1;\n  }\n    // change previous node value with new \n    return 0;\n}\nIteratorG advance(IteratorG it, int n){\n\n\n\n    //To be implemented\n    //move forward by n times\n    return NULL;\n}\nvoid reverse(IteratorG it){\n  Node *curr = it-&gt;head;\n  Node *temp = NULL;\n  while(curr != NULL) {\n    temp = curr-&gt;next;\n    curr-&gt;next = curr-&gt;prev;\n    curr-&gt;prev = temp;\n    curr = temp;\n  }\n  temp = it-&gt;head;\n  it-&gt;head = it-&gt;tail;\n  it-&gt;tail = temp;// reverse elements of whole list\n}\nIteratorG find(IteratorG it, int (*fp) (void *vp) ){\n    // To be implemented \n    // Find elements of vp in list after current position and put in new list.return the list.\n      return NULL;\n }\nint distanceFromStart(IteratorG it){\n\n  Node *c=it-&gt;curr;\n  int count=0;\n\n\n  while(c-&gt;prev!=NULL)\n  {\n    c=c-&gt;prev;\n    count++;\n  }\n  return count;\n    // count number of elements from start of list to current position \n\n}\nint distanceToEnd(IteratorG it){\n\n  Node *cu=it-&gt;curr;\n  int count=0;\n\n  while(cu-&gt;next!=NULL)\n  {\n    cu=cu-&gt;next;\n    count++;\n  }\n  return count;\n    // count number of elements from end of list to current position\n}\nvoid reset(IteratorG it){\n\n\n\n  while(it-&gt;curr-&gt;prev!=NULL)\n  {\n\n    it-&gt;curr=it-&gt;curr-&gt;prev;\n\n  }\n  return;\n    // move current position to start of list\n\n}\n void freeIt(IteratorG it){\n  assert(it != NULL);\n  Node *curr, *prev;\n  curr = it-&gt;head;\n  while (curr != NULL) {\n    prev = curr;\n    curr = curr-&gt;next;\n    free(prev-&gt;value);\n    free(prev);\n  }\n  free(it); // free items  \n\n}\n</code></pre>\n\n<p>This is the header file for the code:</p>\n\n<pre><code>#ifndef LISTITERATORG_H\n#define LISTITERATORG_H\n\n#include &lt;stdio.h&gt;\n\ntypedef struct IteratorGRep *IteratorG;\n\ntypedef int   (*ElmCompareFp)(void const *e1, void const *e2);\ntypedef void *(*ElmNewFp)(void const *e1);\ntypedef void  (*ElmFreeFp)(void *e1);\n\n\nIteratorG newIterator(ElmCompareFp cmpFp, ElmNewFp newFp, ElmFreeFp freeFp);\nint  add(IteratorG it, void *vp);\nint  hasNext(IteratorG it);\nint  hasPrevious(IteratorG it);\nvoid *next(IteratorG it);\nvoid *previous(IteratorG it);\nint  del(IteratorG it);\nint  set(IteratorG it, void *vp);\nIteratorG advance(IteratorG it, int n);\nvoid reverse(IteratorG it);\nIteratorG find(IteratorG it, int (*fp) (void *vp) );\nint distanceFromStart(IteratorG it);\nint distanceToEnd(IteratorG it);\nvoid reset(IteratorG it);\nvoid freeIt(IteratorG it);\n\n#endif\n</code></pre>\n\n<p>One of the functions have yet to be implemented and is indicated in the code itself. But I guess that might not be the source of issue here. I perceive that the add function is not being utilized properly here.</p>\n\n<p>EDIT:\nheres the test case code. Theres no errors in the test case code just in the program above only :</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;string.h&gt;\n#include \"iteratorG.h\"\n#include \"positiveIntType.h\"\n#include \"stringType.h\" \n\n#define MAXARRAY 5\n\n/* Helper Functions Below */\n\n/* Returns 1 if marks &gt;= 50, 0 otherwise  */\nint passMarks(void *marks){\n  return (*((int *) marks) &gt;= 50); \n\n  /* Easy to understand below .. \n     int *ip = (int *) marks;\n     if(*ip &gt;= 50) { return 1; }\n     else { return 0; } \n  */\n}\n\n/* Returns 1 if str starts with \"jo\" */\nint prefixJo(void *str){\n  return (strncmp(\"jo\", (char *) str, 2) == 0) ; \n}\n\n/* A function to print a string from a void pointer */\nvoid prnStr(void *vp){\n  assert(vp != NULL);\n  printf(\" %s\", (char *) vp );      \n}\n\n/* A function to print an integer from a void pointer */\nvoid prnInt(void *vp){\n  assert(vp != NULL);\n  printf(\" %d\", *((int *) vp) );    \n}\n\n/* Prints previous element using the given function 'fp'\n   examples: prnPrev(it1, prnInt); prnPrev(it2, prnStr);\n*/\nvoid prnPrev(IteratorG it, void (*fp) (void *p) ){\n  void *prevP = previous(it);\n  assert(prevP != NULL);\n  printf(\"&gt; Previous value is: \"); \n  fp(prevP);\n  printf(\"\\n\"); \n}\n\n/* Prints next element using the given function 'fp'\n   examples:   prnNext(it1, prnInt); prnNext(it2, prnStr);\n*/\nvoid prnNext(IteratorG it, void (*fp) (void *p) ){\n  void *nextP = next(it);\n  assert(nextP != NULL);\n  printf(\"&gt; Next value is: \"); \n  fp(nextP);\n  printf(\"\\n\"); \n}\n\n/* Prints elements of 'it' from current to last position \n   using the given function 'fp'. The current position \n   of 'it' will change to the end of the list.\n   examples: prnIt(it1, prnInt); prnIt(it2, prnStr);\n*/\nvoid prnIt(IteratorG it, void (*fp) (void *p) ){\n  int count = 0;\n  while(hasNext(it)){\n    void *nextP = next(it); \n    count++;\n    if(count &gt; 1) { printf(\", \"); }\n    fp(nextP);      \n  }\n  printf(\"\\n\"); \n}\n\n\n/* Few Tests Below  */\n\nvoid test1(){\n  printf(\"\\n--====  Test-01       ====------\\n\");\n  IteratorG it1 = newIterator(positiveIntCompare, positiveIntNew,  positiveIntFree);\n  int a[MAXARRAY] = { 25, 78, 6, 82 , 11};\n  for(int i=0; i&lt;MAXARRAY; i++){\n    int result = add(it1 , &amp;a[i]); \n    printf(\"&gt; Inserting %d: %s \\n\", a[i], (result==1 ? \"Success\" : \"Failed\") );\n  }\n  freeIt(it1);\n  printf(\"--====  End of Test-01 ====------\\n\");\n}\n\nvoid test2(){\n  printf(\"\\n--====  Test-02       ====------\\n\");\n  IteratorG it1 = newIterator(positiveIntCompare, positiveIntNew, positiveIntFree);\n  int a[MAXARRAY] = { 72, 14, 62, 8, 93};\n  for(int i=0; i&lt;MAXARRAY; i++){\n    int result = add(it1 , &amp;a[i]); \n    printf(\"&gt; Inserting %d: %s \\n\", a[i], (result==1 ? \"Success\" : \"Failed\") );\n  }\n\n  prnNext(it1, prnInt);\n  prnNext(it1, prnInt);\n  prnPrev(it1, prnInt);\n\n  int newVal1 = 55;\n  int result1 = set(it1, &amp;newVal1);\n  printf(\"&gt; Set value: %d ; return val: %d \\n\", newVal1,  result1 );  \n\n  prnPrev(it1, prnInt);\n\n  freeIt(it1);\n  printf(\"--====  End of Test-02 ====------\\n\");\n}\n\n\n\nint main(int argc, char *argv[])\n{\n\n\n  test1();\n  test2();\n\n  return EXIT_SUCCESS;\n\n}\n</code></pre>\n"
        },
        {
            "tags": [
                "php",
                "shopware"
            ],
            "owner": {
                "reputation": 125,
                "user_id": 3702116,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://i.stack.imgur.com/xySsO.jpg?s=128&g=1",
                "display_name": "Andrii",
                "link": "https://stackoverflow.com/users/3702116/andrii"
            },
            "is_answered": true,
            "view_count": 918,
            "accepted_answer_id": 42826390,
            "answer_count": 1,
            "score": 0,
            "last_activity_date": 1524142754,
            "creation_date": 1489608421,
            "last_edit_date": 1489610721,
            "question_id": 42819695,
            "body_markdown": "I&#39;m trying to extend template `frontend/home/index.tpl` via own plugin.\r\n\r\nHere my root file:\r\n\r\n    &lt;?php\r\n    namespace TdevExtend;\r\n    use Shopware\\Components\\Plugin;\r\n    class TdevExtend extends Plugin\r\n    {\r\n       public static function getSubscribedEvents(){\r\n        return [\r\n            &#39;Enlight_Controller_Dispatcher_ControllerPath_Frontend_MyPlugin&#39; =&gt;\r\n                &#39;onDetailPostDispatch&#39;\r\n        ];\r\n       }\r\n       public function onDetailPostDispatch(\\Enlight_Event_EventArgs $args)\r\n       {\r\n          $this-&gt;container-&gt;get(&#39;template&#39;)-&gt;addTemplateDir(\r\n            $this-&gt;getPath() . &#39;/Resources/views/&#39;\r\n          );\r\n        return __DIR__ . &#39;/Controllers/Frontend/MyPlugin.php&#39;;\r\n       }\r\n    }\r\n    ?&gt;\r\n\r\nHere are my Controller **MyPlugin.php** in dirrectory Controllers\\Frontend\r\n                          \r\n    public function preDispatch()\r\n       {\r\n        /** @var \\Shopware\\Components\\Plugin $plugin */\r\n        $plugin = $this-&gt;get(&#39;kernel&#39;)-&gt;getPlugins()[&#39;TdevProductTab&#39;];\r\n\r\n        $this-&gt;get(&#39;template&#39;)-&gt;addTemplateDir($plugin-&gt;getPath() . &#39;/Resources/views/&#39;);\r\n    }\r\n\r\n\r\nAnd template in folder Resources\\views\\frontend\\home\\\r\n\r\n     {extends file=&quot;parent:frontend/home/index.tpl&quot;}\r\n     {block name=&#39;frontend_index_content&#39;}\r\n        &lt;div class=&quot;&quot;&gt;Hello world!&lt;/div&gt;\r\n        {$smarty.block.parent}\r\n     {/block}\r\n\r\nI have read [official documentation][1] and researched plugins examples [plugins examples][2]\r\nAfter installing/reinstalling plugin crear cache on backend and delete manualy folder in `var/cache`. But nothing has helped me.\r\n\r\n  [1]: https://developers.shopware.com/developers-guide/plugin-system/\r\n  [2]: https://github.com/shopware/devdocs",
            "link": "https://stackoverflow.com/questions/42819695/shopware-5-2-20-cannot-extend-template-via-plugin",
            "title": "Shopware 5.2.20. Cannot extend template via plugin",
            "body": "<p>I'm trying to extend template <code>frontend/home/index.tpl</code> via own plugin.</p>\n\n<p>Here my root file:</p>\n\n<pre><code>&lt;?php\nnamespace TdevExtend;\nuse Shopware\\Components\\Plugin;\nclass TdevExtend extends Plugin\n{\n   public static function getSubscribedEvents(){\n    return [\n        'Enlight_Controller_Dispatcher_ControllerPath_Frontend_MyPlugin' =&gt;\n            'onDetailPostDispatch'\n    ];\n   }\n   public function onDetailPostDispatch(\\Enlight_Event_EventArgs $args)\n   {\n      $this-&gt;container-&gt;get('template')-&gt;addTemplateDir(\n        $this-&gt;getPath() . '/Resources/views/'\n      );\n    return __DIR__ . '/Controllers/Frontend/MyPlugin.php';\n   }\n}\n?&gt;\n</code></pre>\n\n<p>Here are my Controller <strong>MyPlugin.php</strong> in dirrectory Controllers\\Frontend</p>\n\n<pre><code>public function preDispatch()\n   {\n    /** @var \\Shopware\\Components\\Plugin $plugin */\n    $plugin = $this-&gt;get('kernel')-&gt;getPlugins()['TdevProductTab'];\n\n    $this-&gt;get('template')-&gt;addTemplateDir($plugin-&gt;getPath() . '/Resources/views/');\n}\n</code></pre>\n\n<p>And template in folder Resources\\views\\frontend\\home\\</p>\n\n<pre><code> {extends file=\"parent:frontend/home/index.tpl\"}\n {block name='frontend_index_content'}\n    &lt;div class=\"\"&gt;Hello world!&lt;/div&gt;\n    {$smarty.block.parent}\n {/block}\n</code></pre>\n\n<p>I have read <a href=\"https://developers.shopware.com/developers-guide/plugin-system/\" rel=\"nofollow noreferrer\">official documentation</a> and researched plugins examples <a href=\"https://github.com/shopware/devdocs\" rel=\"nofollow noreferrer\">plugins examples</a>\nAfter installing/reinstalling plugin crear cache on backend and delete manualy folder in <code>var/cache</code>. But nothing has helped me.</p>\n"
        },
        {
            "tags": [
                "gitlab",
                "electron",
                "gitlab-ci"
            ],
            "owner": {
                "reputation": 845,
                "user_id": 1592783,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/PttsV.gif?s=128&g=1",
                "display_name": "jackdh",
                "link": "https://stackoverflow.com/users/1592783/jackdh"
            },
            "is_answered": false,
            "view_count": 16,
            "answer_count": 0,
            "score": -1,
            "last_activity_date": 1524142754,
            "creation_date": 1524142754,
            "question_id": 49921785,
            "body_markdown": "I&#39;m struggling to get the CI setup for Gitlab. I&#39;d ideally like it to be able to build and package my electron application and out put the exe as an artifact which I can then target with electron-builders auto updater.\r\n\r\nHowever before I can do the above I need to successfully setup Gitlabs `gitlab-ci.yml` I&#39;ve tried to patch together a config from examples I&#39;ve found on the web but still cannot get it to work.\r\n\r\n\r\n    image: aheuermann/electron:latest\r\n    \r\n    \r\n    variables:\r\n      VERSION_ID: &#39;1.0.$CI_PIPELINE_ID&#39;\r\n    \r\n    stages:\r\n      - build\r\n    \r\n    cache:\r\n        paths:\r\n        - node_modules/\r\n        - app/node_modules/\r\n    \r\n    before_script:\r\n      - Xvfb -ac -screen scrn 1280x2000x24 :9.0 &amp;\r\n      - export DISPLAY=:9.0\r\n      - export CXX=&quot;g++-4.8&quot;\r\n      - yarn\r\n      - cd app &amp;&amp; yarn &amp;&amp; cd ..\r\n      - npm config set strict-ssl false\r\n    \r\n    \r\n    build:\r\n      image: slauta93/electron-builder-win\r\n      stage: build\r\n      artifacts:\r\n        paths:\r\n          - $CI_PROJECT_DIR/dist/*.*\r\n      script:\r\n        - node --version\r\n        - yarn run package-win --ignore-scripts\r\n\r\n\r\nHas anyone had any experience with this?",
            "link": "https://stackoverflow.com/questions/49921785/electron-gitlab-continuous-intregration",
            "title": "Electron Gitlab continuous intregration",
            "body": "<p>I'm struggling to get the CI setup for Gitlab. I'd ideally like it to be able to build and package my electron application and out put the exe as an artifact which I can then target with electron-builders auto updater.</p>\n\n<p>However before I can do the above I need to successfully setup Gitlabs <code>gitlab-ci.yml</code> I've tried to patch together a config from examples I've found on the web but still cannot get it to work.</p>\n\n<pre><code>image: aheuermann/electron:latest\n\n\nvariables:\n  VERSION_ID: '1.0.$CI_PIPELINE_ID'\n\nstages:\n  - build\n\ncache:\n    paths:\n    - node_modules/\n    - app/node_modules/\n\nbefore_script:\n  - Xvfb -ac -screen scrn 1280x2000x24 :9.0 &amp;\n  - export DISPLAY=:9.0\n  - export CXX=\"g++-4.8\"\n  - yarn\n  - cd app &amp;&amp; yarn &amp;&amp; cd ..\n  - npm config set strict-ssl false\n\n\nbuild:\n  image: slauta93/electron-builder-win\n  stage: build\n  artifacts:\n    paths:\n      - $CI_PROJECT_DIR/dist/*.*\n  script:\n    - node --version\n    - yarn run package-win --ignore-scripts\n</code></pre>\n\n<p>Has anyone had any experience with this?</p>\n"
        },
        {
            "tags": [
                "tensorflow",
                "machine-learning",
                "deep-learning",
                "keras",
                "conv-neural-network"
            ],
            "owner": {
                "reputation": 22,
                "user_id": 5743375,
                "user_type": "registered",
                "accept_rate": 50,
                "profile_image": "https://lh3.googleusercontent.com/-042qHQF8G5A/AAAAAAAAAAI/AAAAAAAAAV0/kvg4u160jHo/photo.jpg?sz=128",
                "display_name": "Gayathri Menath",
                "link": "https://stackoverflow.com/users/5743375/gayathri-menath"
            },
            "is_answered": true,
            "view_count": 490,
            "answer_count": 1,
            "score": 0,
            "last_activity_date": 1524142750,
            "creation_date": 1511164037,
            "last_edit_date": 1524142750,
            "question_id": 47387234,
            "body_markdown": "I am using Keras sequential model for image classification. My problem is to find a particular watermark present in any part of the image or not. I am using a dataset of 9000 images. Keras backend is Tensorflow.\r\n\r\n    Keras==2.0.4  \r\n    tensorflow==1.2.1\r\n\r\nWhile training, I am getting an accuracy of 86% and val_acc is 91%. But all the prediction result is categorizing to one category. \r\n\r\n[![][1]][1]\r\n\r\nThe program used for training is given below.\r\n\r\n    import h5py\r\n    import numpy as np\r\n    import cv2\r\n    import keras\r\n    from keras.models import Sequential\r\n    from keras.layers import Convolution2D\r\n    from keras.layers import MaxPooling2D\r\n    from keras.layers import Flatten\r\n    from keras.layers import Dense\r\n    from keras.layers import Activation, Dropout\r\n    from keras.preprocessing.image import ImageDataGenerator\r\n    from PIL import ImageFile\r\n    \r\n    ImageFile.LOAD_TRUNCATED_IMAGES = True\r\n    \r\n    classifier = Sequential()\r\n    classifier.add(Convolution2D(32, 3, 3, input_shape = (150, 150, 3), activation = &#39;relu&#39;))\r\n    classifier.add(MaxPooling2D(pool_size = (2, 2)))\r\n    classifier.add(Convolution2D(32, 3, 3, activation = &#39;relu&#39;))\r\n    classifier.add(MaxPooling2D(pool_size = (2, 2)))\r\n    classifier.add(Convolution2D(64, 3, 3))\r\n    classifier.add(Activation(&#39;relu&#39;))\r\n    classifier.add(MaxPooling2D(pool_size=(2, 2)))\r\n    classifier.add(Flatten())\r\n    classifier.add(Dense(output_dim = 64, activation = &#39;relu&#39;))\r\n    classifier.add(Dropout(0.5))\r\n    classifier.add(Dense(output_dim = 1, activation = &#39;sigmoid&#39;))\r\n    classifier.compile(optimizer = &#39;rmsprop&#39;, loss = &#39;binary_crossentropy&#39;, metrics = [&#39;accuracy&#39;])\r\n    \r\n    \r\n    train_datagen = ImageDataGenerator(rescale = 1./255,\r\n                                       shear_range = 0.2,\r\n                                       zoom_range = 0.2,\r\n                                       horizontal_flip = True)\r\n                                       #rotation_range=15,\r\n                                       #zca_whitening=True)\r\n    \r\n    test_datagen = ImageDataGenerator(rescale = 1./255)\r\n    \r\n    training_set = train_datagen.flow_from_directory(&#39;train&#39;,\r\n                                                     target_size = (150, 150),\r\n                                                     batch_size = 32,\r\n                                                     class_mode = &#39;binary&#39;)\r\n    \r\n    test_set = test_datagen.flow_from_directory(&#39;test&#39;,\r\n                                                target_size = (150, 150),\r\n                                                batch_size = 32,\r\n                                                class_mode = &#39;binary&#39;)\r\n    \r\n    callbacks = [\r\n      keras.callbacks.EarlyStopping(\r\n        monitor=&#39;val_loss&#39;, patience=10, verbose=0)\r\n      ]\r\n    \r\n    hist = classifier.fit_generator(training_set,\r\n                             samples_per_epoch = 9000,\r\n                             nb_epoch = 10,\r\n                             validation_data = test_set,\r\n                             nb_val_samples = 3000,\r\n                             callbacks=callbacks)\r\n                             # )\r\n\r\n`train` directory has 2 subdirectories: `watermark` and `nonwatermark`. Am I doing anything wrong? Any help will be appreciated.\r\n\r\n  [1]: https://i.stack.imgur.com/LYwzx.jpg\r\n",
            "link": "https://stackoverflow.com/questions/47387234/keras-binary-classification-same-prediction-output-class",
            "title": "Keras binary classification: same prediction output class",
            "body": "<p>I am using Keras sequential model for image classification. My problem is to find a particular watermark present in any part of the image or not. I am using a dataset of 9000 images. Keras backend is Tensorflow.</p>\n\n<pre><code>Keras==2.0.4  \ntensorflow==1.2.1\n</code></pre>\n\n<p>While training, I am getting an accuracy of 86% and val_acc is 91%. But all the prediction result is categorizing to one category. </p>\n\n<p><a href=\"https://i.stack.imgur.com/LYwzx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LYwzx.jpg\" alt=\"\"></a></p>\n\n<p>The program used for training is given below.</p>\n\n<pre><code>import h5py\nimport numpy as np\nimport cv2\nimport keras\nfrom keras.models import Sequential\nfrom keras.layers import Convolution2D\nfrom keras.layers import MaxPooling2D\nfrom keras.layers import Flatten\nfrom keras.layers import Dense\nfrom keras.layers import Activation, Dropout\nfrom keras.preprocessing.image import ImageDataGenerator\nfrom PIL import ImageFile\n\nImageFile.LOAD_TRUNCATED_IMAGES = True\n\nclassifier = Sequential()\nclassifier.add(Convolution2D(32, 3, 3, input_shape = (150, 150, 3), activation = 'relu'))\nclassifier.add(MaxPooling2D(pool_size = (2, 2)))\nclassifier.add(Convolution2D(32, 3, 3, activation = 'relu'))\nclassifier.add(MaxPooling2D(pool_size = (2, 2)))\nclassifier.add(Convolution2D(64, 3, 3))\nclassifier.add(Activation('relu'))\nclassifier.add(MaxPooling2D(pool_size=(2, 2)))\nclassifier.add(Flatten())\nclassifier.add(Dense(output_dim = 64, activation = 'relu'))\nclassifier.add(Dropout(0.5))\nclassifier.add(Dense(output_dim = 1, activation = 'sigmoid'))\nclassifier.compile(optimizer = 'rmsprop', loss = 'binary_crossentropy', metrics = ['accuracy'])\n\n\ntrain_datagen = ImageDataGenerator(rescale = 1./255,\n                                   shear_range = 0.2,\n                                   zoom_range = 0.2,\n                                   horizontal_flip = True)\n                                   #rotation_range=15,\n                                   #zca_whitening=True)\n\ntest_datagen = ImageDataGenerator(rescale = 1./255)\n\ntraining_set = train_datagen.flow_from_directory('train',\n                                                 target_size = (150, 150),\n                                                 batch_size = 32,\n                                                 class_mode = 'binary')\n\ntest_set = test_datagen.flow_from_directory('test',\n                                            target_size = (150, 150),\n                                            batch_size = 32,\n                                            class_mode = 'binary')\n\ncallbacks = [\n  keras.callbacks.EarlyStopping(\n    monitor='val_loss', patience=10, verbose=0)\n  ]\n\nhist = classifier.fit_generator(training_set,\n                         samples_per_epoch = 9000,\n                         nb_epoch = 10,\n                         validation_data = test_set,\n                         nb_val_samples = 3000,\n                         callbacks=callbacks)\n                         # )\n</code></pre>\n\n<p><code>train</code> directory has 2 subdirectories: <code>watermark</code> and <code>nonwatermark</code>. Am I doing anything wrong? Any help will be appreciated.</p>\n"
        },
        {
            "tags": [
                "java",
                "inheritance",
                "initialization"
            ],
            "owner": {
                "reputation": 1483,
                "user_id": 378897,
                "user_type": "registered",
                "accept_rate": 68,
                "profile_image": "https://www.gravatar.com/avatar/52fa545e82db17f9d6bb467dd4d9af07?s=128&d=identicon&r=PG",
                "display_name": "Simiil",
                "link": "https://stackoverflow.com/users/378897/simiil"
            },
            "is_answered": true,
            "view_count": 33,
            "answer_count": 3,
            "score": 0,
            "last_activity_date": 1524142750,
            "creation_date": 1524134968,
            "question_id": 49919211,
            "body_markdown": "I have a simple Java Program:\r\n\r\n    public abstract class Test {\r\n\t  public Test() {\r\n  \t\tfoo();\r\n\t  }\r\n\r\n\t  public abstract void foo();\r\n    }\r\n\r\n    public class Test2 extends Test {\r\n\r\n\t  private final Object testObj = new Object();\r\n\r\n\t  public Test2() {\r\n\t\tsuper();\r\n\t  }\r\n\r\n\t  @Override\r\n\t  public void foo() {\r\n\t\tSystem.out.println(&quot;object is: &quot; + testObj);\r\n\t  }\r\n\r\n    }\r\n\r\nWhen instantiating `Test2` its contructor calls the constructor of `Test`, which in turn calls the method `foo` implemented in `Test2`\r\n\r\nduring execution of `foo`, the field `testObj` is `null`, even though it is final.\r\n\r\nIs this the correct behaviour? If so, is there a pattern to work around it?\r\n",
            "link": "https://stackoverflow.com/questions/49919211/weird-behaviour-initializing-final-fields-in-java",
            "title": "Weird behaviour initializing final fields in java",
            "body": "<p>I have a simple Java Program:</p>\n\n<pre><code>public abstract class Test {\n  public Test() {\n    foo();\n  }\n\n  public abstract void foo();\n}\n\npublic class Test2 extends Test {\n\n  private final Object testObj = new Object();\n\n  public Test2() {\n    super();\n  }\n\n  @Override\n  public void foo() {\n    System.out.println(\"object is: \" + testObj);\n  }\n\n}\n</code></pre>\n\n<p>When instantiating <code>Test2</code> its contructor calls the constructor of <code>Test</code>, which in turn calls the method <code>foo</code> implemented in <code>Test2</code></p>\n\n<p>during execution of <code>foo</code>, the field <code>testObj</code> is <code>null</code>, even though it is final.</p>\n\n<p>Is this the correct behaviour? If so, is there a pattern to work around it?</p>\n"
        },
        {
            "tags": [
                "android"
            ],
            "owner": {
                "reputation": 1,
                "user_id": 8978550,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/10dcb50026bca8c197dcb07cb678e750?s=128&d=identicon&r=PG&f=1",
                "display_name": "Gopal",
                "link": "https://stackoverflow.com/users/8978550/gopal"
            },
            "is_answered": false,
            "view_count": 19,
            "answer_count": 0,
            "score": 0,
            "last_activity_date": 1524142749,
            "creation_date": 1524142749,
            "question_id": 49921782,
            "body_markdown": "Is there any possible to get the Facebook friends list by using messenger / Facebook SDK right now\r\n\r\nI&#39;m trying this below code Getting 200 and null error for friends list  \r\n \r\n new GraphRequest(AccessToken.getCurrentAccessToken(), &quot;/me/taggable_friends&quot;)\r\n               ",
            "link": "https://stackoverflow.com/questions/49921782/is-there-any-possible-to-get-the-facebook-friends-list-by-using-messenger-face",
            "title": "Is there any possible to get the Facebook friends list by using messenger / Facebook SDK right now",
            "body": "<p>Is there any possible to get the Facebook friends list by using messenger / Facebook SDK right now</p>\n\n<p>I'm trying this below code Getting 200 and null error for friends list  </p>\n\n<p>new GraphRequest(AccessToken.getCurrentAccessToken(), \"/me/taggable_friends\")</p>\n"
        },
        {
            "tags": [
                "android",
                "firebase",
                "firebase-database"
            ],
            "owner": {
                "reputation": 29,
                "user_id": 8430810,
                "user_type": "registered",
                "profile_image": "https://lh6.googleusercontent.com/-QnAnr7TUThg/AAAAAAAAAAI/AAAAAAAAal8/6DahF0srk2o/photo.jpg?sz=128",
                "display_name": "Bitlejuce Do",
                "link": "https://stackoverflow.com/users/8430810/bitlejuce-do"
            },
            "is_answered": true,
            "view_count": 24,
            "accepted_answer_id": 49921777,
            "answer_count": 1,
            "score": 1,
            "last_activity_date": 1524142745,
            "creation_date": 1524141737,
            "question_id": 49921426,
            "body_markdown": "I was trying to change values in child of my DB, but can&#39;t do it whithout deleting other data under this child. Trying to use push(), but it create new child and I want update value of existing child and save other childs.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/A6ILY.jpg\r\n\r\nLet&#39;s say I need to change ONLY value of Field 1 (email, name) and save child Test and other data under. \r\n\r\n     databaseRef.child(&quot;Field 1&quot;).setValue(new UserForRealtimeDatabase(&quot;1st value of Field 1&quot;, &quot;2st value of Field 1&quot;));\r\nThis code is work but all the data under Field 1 complitely delete. \r\nCan you help me how to do that or may be there is no standart option for that?",
            "link": "https://stackoverflow.com/questions/49921426/firebase-how-to-set-value-to-child-without-updating-deleting-subchildren",
            "title": "Firebase: How to set value to child without updating/deleting subChildren?",
            "body": "<p>I was trying to change values in child of my DB, but can't do it whithout deleting other data under this child. Trying to use push(), but it create new child and I want update value of existing child and save other childs.</p>\n\n<p><a href=\"https://i.stack.imgur.com/A6ILY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A6ILY.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Let's say I need to change ONLY value of Field 1 (email, name) and save child Test and other data under. </p>\n\n<pre><code> databaseRef.child(\"Field 1\").setValue(new UserForRealtimeDatabase(\"1st value of Field 1\", \"2st value of Field 1\"));\n</code></pre>\n\n<p>This code is work but all the data under Field 1 complitely delete. \nCan you help me how to do that or may be there is no standart option for that?</p>\n"
        },
        {
            "tags": [
                "javascript",
                "adobe",
                "bookmarks"
            ],
            "owner": {
                "reputation": 1,
                "user_id": 6526200,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/8cc980d4497bf914e6e8ddf91f6702b2?s=128&d=identicon&r=PG&f=1",
                "display_name": "letham",
                "link": "https://stackoverflow.com/users/6526200/letham"
            },
            "is_answered": false,
            "view_count": 14,
            "answer_count": 0,
            "score": 0,
            "last_activity_date": 1524142742,
            "creation_date": 1524142536,
            "last_edit_date": 1524142742,
            "question_id": 49921705,
            "body_markdown": "I am trying to bookmark a file with a button. The first bookmark needs to be entered with using input/prompt/textbox.\r\n\r\nI wrote a folder-level javascript like below.\r\n\r\n    var a = 0;  \r\n    app.addToolButton({ \r\n         cName: &quot;bookmark&quot;,\r\n         cExec: &quot;var cRtn = app.response(&#39;Job Card numarasini giriniz&#39;);a = this.pageNum;cRtn =parseInt(cRtn);this.bookmarkRoot.createChild(cRtn,&#39;this.pageNum =a&#39;)&quot;, \r\n         cLabel: &quot;bookmark&quot;, \r\n         cTooltext: &quot;bookmark&quot;\r\n    });\r\n\r\nThis code works well with just one bookmark. But when i added two bookmarks, first one is sending me to last bookmarked page. The variable is changing. Everytime i change the &#39;a&#39; variable, previous bookmarks are changed too. How can i fix a specific page to bookmarks ?\r\n\r\nIf i can solve this problem, i will try to bookmark automatically. (input only first time, then bookmarks&#39; name will increase one by one. Bookmark names will be only numbers not string.",
            "link": "https://stackoverflow.com/questions/49921705/adobe-acrobat-javascript-bookmark-adding",
            "title": "Adobe Acrobat Javascript Bookmark Adding",
            "body": "<p>I am trying to bookmark a file with a button. The first bookmark needs to be entered with using input/prompt/textbox.</p>\n\n<p>I wrote a folder-level javascript like below.</p>\n\n<pre><code>var a = 0;  \napp.addToolButton({ \n     cName: \"bookmark\",\n     cExec: \"var cRtn = app.response('Job Card numarasini giriniz');a = this.pageNum;cRtn =parseInt(cRtn);this.bookmarkRoot.createChild(cRtn,'this.pageNum =a')\", \n     cLabel: \"bookmark\", \n     cTooltext: \"bookmark\"\n});\n</code></pre>\n\n<p>This code works well with just one bookmark. But when i added two bookmarks, first one is sending me to last bookmarked page. The variable is changing. Everytime i change the 'a' variable, previous bookmarks are changed too. How can i fix a specific page to bookmarks ?</p>\n\n<p>If i can solve this problem, i will try to bookmark automatically. (input only first time, then bookmarks' name will increase one by one. Bookmark names will be only numbers not string.</p>\n"
        },
        {
            "tags": [
                "javascript",
                "lodash"
            ],
            "owner": {
                "reputation": 704,
                "user_id": 772264,
                "user_type": "registered",
                "accept_rate": 40,
                "profile_image": "https://www.gravatar.com/avatar/0e52ade1d9479d214e9316c747198e7a?s=128&d=identicon&r=PG",
                "display_name": "neridaj",
                "link": "https://stackoverflow.com/users/772264/neridaj"
            },
            "is_answered": true,
            "view_count": 7164,
            "accepted_answer_id": 40140347,
            "answer_count": 4,
            "score": 1,
            "last_activity_date": 1524142741,
            "creation_date": 1476904230,
            "question_id": 40139667,
            "body_markdown": "I have an array of vehicles that need to be grouped by make and model, only if the &#39;selected&#39; property is true. The resulting object should contain properties for make model and count. Using lodash, how can I organize the vehicle objects into the desired result objects. I&#39;m able to get the vehicle objects grouped by makeCode but I&#39;m not sure how to group by more than one property.\r\n\r\n***group by make code works***\r\n\r\n          var vehicles = _.groupBy(response.vehicleTypes, function(item)\r\n          {\r\n            return item.makeCode; // how to group by model code as well\r\n          });\r\n\r\n\r\n***initial vehicles***\r\n\r\n    {\r\n        id: 1, \r\n        selected: true, \r\n        makeCode: &quot;Make-A&quot;, \r\n        modelCode: &quot;Model-a&quot;, \r\n        trimCode: &quot;trim-a&quot;, \r\n        yearCode: &quot;2012&quot;\r\n    },\r\n    {\r\n        id: 2, \r\n        selected: false, \r\n        makeCode: &quot;Make-A&quot;, \r\n        modelCode: &quot;Model-a&quot;, \r\n        trimCode: &quot;trim-a&quot;, \r\n        yearCode: &quot;2013&quot;\r\n    },\r\n    {\r\n        id: 3, \r\n        selected: true, \r\n        makeCode: &quot;Make-B&quot;, \r\n        modelCode: &quot;Model-c&quot;, \r\n        trimCode: &quot;trim-a&quot;, \r\n        yearCode: &quot;2014&quot;\r\n    },\r\n    {\r\n        id: 25, \r\n        selected: true, \r\n        makeCode: &quot;Make-C&quot;, \r\n        modelCode: &quot;Model-b&quot;, \r\n        trimCode: &quot;trim-b&quot;, \r\n        yearCode: &quot;2012&quot;\r\n    },\r\n    {\r\n        id: 26, \r\n        selected: true, \r\n        makeCode: &quot;Make-C&quot;, \r\n        modelCode: &quot;Model-b&quot;, \r\n        trimCode: &quot;trim-a&quot;, \r\n        yearCode: &quot;2013&quot;\r\n    }\r\n\r\n\r\n***result object***\r\n\r\n    {\r\n        Make-A: {\r\n            Model-a: {\r\n                count: 1\r\n            }\r\n        }\r\n    },\r\n    \r\n    {\r\n        Make-B: {\r\n            Model-c: {\r\n                count: 1\r\n            }\r\n        }\r\n    },\r\n    {\r\n        Make-C: {\r\n            Model-b: {\r\n                count: 2\r\n            }\r\n        }\r\n    }",
            "link": "https://stackoverflow.com/questions/40139667/lodash-group-by-multiple-properties-if-property-value-is-true",
            "title": "Lodash group by multiple properties if property value is true",
            "body": "<p>I have an array of vehicles that need to be grouped by make and model, only if the 'selected' property is true. The resulting object should contain properties for make model and count. Using lodash, how can I organize the vehicle objects into the desired result objects. I'm able to get the vehicle objects grouped by makeCode but I'm not sure how to group by more than one property.</p>\n\n<p><strong><em>group by make code works</em></strong></p>\n\n<pre><code>      var vehicles = _.groupBy(response.vehicleTypes, function(item)\n      {\n        return item.makeCode; // how to group by model code as well\n      });\n</code></pre>\n\n<p><strong><em>initial vehicles</em></strong></p>\n\n<pre><code>{\n    id: 1, \n    selected: true, \n    makeCode: \"Make-A\", \n    modelCode: \"Model-a\", \n    trimCode: \"trim-a\", \n    yearCode: \"2012\"\n},\n{\n    id: 2, \n    selected: false, \n    makeCode: \"Make-A\", \n    modelCode: \"Model-a\", \n    trimCode: \"trim-a\", \n    yearCode: \"2013\"\n},\n{\n    id: 3, \n    selected: true, \n    makeCode: \"Make-B\", \n    modelCode: \"Model-c\", \n    trimCode: \"trim-a\", \n    yearCode: \"2014\"\n},\n{\n    id: 25, \n    selected: true, \n    makeCode: \"Make-C\", \n    modelCode: \"Model-b\", \n    trimCode: \"trim-b\", \n    yearCode: \"2012\"\n},\n{\n    id: 26, \n    selected: true, \n    makeCode: \"Make-C\", \n    modelCode: \"Model-b\", \n    trimCode: \"trim-a\", \n    yearCode: \"2013\"\n}\n</code></pre>\n\n<p><strong><em>result object</em></strong></p>\n\n<pre><code>{\n    Make-A: {\n        Model-a: {\n            count: 1\n        }\n    }\n},\n\n{\n    Make-B: {\n        Model-c: {\n            count: 1\n        }\n    }\n},\n{\n    Make-C: {\n        Model-b: {\n            count: 2\n        }\n    }\n}\n</code></pre>\n"
        },
        {
            "tags": [
                "xamarin.forms",
                "uigesturerecognizer"
            ],
            "owner": {
                "reputation": 630,
                "user_id": 2558653,
                "user_type": "registered",
                "accept_rate": 64,
                "profile_image": "https://www.gravatar.com/avatar/3a30d17896f14d343e4cae80de728d6f?s=128&d=identicon&r=PG",
                "display_name": "Gab",
                "link": "https://stackoverflow.com/users/2558653/gab"
            },
            "is_answered": true,
            "view_count": 15,
            "answer_count": 1,
            "score": 0,
            "last_activity_date": 1524142735,
            "creation_date": 1524127567,
            "question_id": 49916618,
            "body_markdown": "I have a view in my Xamarin forms application where I need to detect if the user is interacting with the screen or not, and go back to the previous view afteer some time if there is no activity.\r\n\r\nIs there a simple way to detect it from my ViewModel?\r\n\r\nOtherwise, detecting the scrolling on a ListView can be enough. But the ListView has no &quot;Scrolled&quot; event... Maybe with a GestureRecognizer ?\r\n\r\nWhat can I do ?",
            "link": "https://stackoverflow.com/questions/49916618/xamarin-forms-how-to-detect-any-gesture",
            "title": "Xamarin Forms - How to detect any gesture",
            "body": "<p>I have a view in my Xamarin forms application where I need to detect if the user is interacting with the screen or not, and go back to the previous view afteer some time if there is no activity.</p>\n\n<p>Is there a simple way to detect it from my ViewModel?</p>\n\n<p>Otherwise, detecting the scrolling on a ListView can be enough. But the ListView has no \"Scrolled\" event... Maybe with a GestureRecognizer ?</p>\n\n<p>What can I do ?</p>\n"
        },
        {
            "tags": [
                "javascript",
                "vuejs2",
                "perfect-scrollbar"
            ],
            "owner": {
                "reputation": 137,
                "user_id": 8836592,
                "user_type": "registered",
                "accept_rate": 75,
                "profile_image": "https://www.gravatar.com/avatar/87e42472d9fe459ccd216da4d8faa187?s=128&d=identicon&r=PG&f=1",
                "display_name": "Paco Pacici",
                "link": "https://stackoverflow.com/users/8836592/paco-pacici"
            },
            "is_answered": false,
            "view_count": 29,
            "answer_count": 0,
            "score": 1,
            "last_activity_date": 1524142725,
            "creation_date": 1524141905,
            "last_edit_date": 1524142725,
            "question_id": 49921484,
            "body_markdown": "I am working on a &lt;a href=&quot;https://github.com/utatti/perfect-scrollbar&quot;&gt;`perfect-scrollbar`&lt;/a&gt; directive.\r\n\r\n     yarn add perfect-scrollbar\r\n\r\nI found &lt;a href=&quot;https://github.com/utatti/perfect-scrollbar/issues/724#issuecomment-347923707&quot;&gt;this&lt;/a&gt; lying around, but it silently fails.\r\nThis is the code:\r\n\r\n     &lt;template&gt;\r\n      &lt;div class=&quot;scroll-area&quot;&gt;\r\n       &lt;img src=&quot;https://i.kinja-img.com/gawker-media/image/upload/s--I5-_uX-9--/c_scale,fl_progressive,q_80,w_800/oh1cxyrtivnead6tn8k6.png&quot; v-scroll/&gt;\r\n      &lt;/div&gt;\r\n     &lt;/template&gt;\r\n\r\n     &lt;script&gt;\r\n     import { Container, PerfectScrollbar } from &#39;myCompnts&#39;;\r\n\r\n     export default {\r\n      name: &#39;Test&#39;,\r\n      data() {\r\n       return {\r\n     \r\n       };\r\n     },\r\n     directives: {\r\n      scroll: PerfectScrollbar\r\n     },\r\n     components: {\r\n      Container\r\n     },\r\n\r\n     };\r\n     &lt;/script&gt;\r\n\r\n     &lt;style scoped&gt;\r\n     .scroll-area {\r\n      position: relative;\r\n      width: 100px;\r\n      height: 300px;\r\n      overflow: hidden;\r\n     }\r\n     &lt;/style&gt;\r\n\r\nUnfortunately, it either &quot;no element is specified to initialize PerfectScrollbar&quot;, or it gives back these cryptic error messages suggesting an issue with compilation:&lt;br/&gt;\r\n[![console][1]][1]&lt;br/&gt; Just as the element was not passed in correctly. Vue Chrome debugger provides no info on whether the directive actually got there. The idea sounds sexy as hell, but how to implement it? Thanks for any help, really! :)  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7HxYS.png",
            "link": "https://stackoverflow.com/questions/49921484/perfect-scrollbar-as-an-vue-js2-directive",
            "title": "Perfect Scrollbar as an Vue.js2 directive",
            "body": "<p>I am working on a <a href=\"https://github.com/utatti/perfect-scrollbar\" rel=\"nofollow noreferrer\"><code>perfect-scrollbar</code></a> directive.</p>\n\n<pre><code> yarn add perfect-scrollbar\n</code></pre>\n\n<p>I found <a href=\"https://github.com/utatti/perfect-scrollbar/issues/724#issuecomment-347923707\" rel=\"nofollow noreferrer\">this</a> lying around, but it silently fails.\nThis is the code:</p>\n\n<pre><code> &lt;template&gt;\n  &lt;div class=\"scroll-area\"&gt;\n   &lt;img src=\"https://i.kinja-img.com/gawker-media/image/upload/s--I5-_uX-9--/c_scale,fl_progressive,q_80,w_800/oh1cxyrtivnead6tn8k6.png\" v-scroll/&gt;\n  &lt;/div&gt;\n &lt;/template&gt;\n\n &lt;script&gt;\n import { Container, PerfectScrollbar } from 'myCompnts';\n\n export default {\n  name: 'Test',\n  data() {\n   return {\n\n   };\n },\n directives: {\n  scroll: PerfectScrollbar\n },\n components: {\n  Container\n },\n\n };\n &lt;/script&gt;\n\n &lt;style scoped&gt;\n .scroll-area {\n  position: relative;\n  width: 100px;\n  height: 300px;\n  overflow: hidden;\n }\n &lt;/style&gt;\n</code></pre>\n\n<p>Unfortunately, it either \"no element is specified to initialize PerfectScrollbar\", or it gives back these cryptic error messages suggesting an issue with compilation:<br/>\n<a href=\"https://i.stack.imgur.com/7HxYS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7HxYS.png\" alt=\"console\"></a><br/> Just as the element was not passed in correctly. Vue Chrome debugger provides no info on whether the directive actually got there. The idea sounds sexy as hell, but how to implement it? Thanks for any help, really! :)  </p>\n"
        },
        {
            "tags": [
                "d3.js"
            ],
            "owner": {
                "reputation": 46,
                "user_id": 4924600,
                "user_type": "registered",
                "accept_rate": 23,
                "profile_image": "https://lh6.googleusercontent.com/-ACK3ZIIxI4w/AAAAAAAAAAI/AAAAAAAAAPk/B-nM3ltKE-A/photo.jpg?sz=128",
                "display_name": "Kiran",
                "link": "https://stackoverflow.com/users/4924600/kiran"
            },
            "is_answered": false,
            "view_count": 29,
            "answer_count": 1,
            "score": -2,
            "last_activity_date": 1524142722,
            "creation_date": 1524118748,
            "question_id": 49913991,
            "body_markdown": "The below mentioned snippet is slowing the performance. I am unable to find a better for this. its used to display table and its child rows as well. \r\nCan someone help me in optimizing this snippet for better use.\r\n\r\nTHanks in advance\r\n\r\n            childRow.transition()\r\n                                    .duration(duration)\r\n                                    .attr(&quot;transform&quot;, function(d) {\r\n                                        //on transitions when clicked the child \r\n            rows are recalculated and placed accordingly on page\r\n                                        childRow.selectAll(&#39;rect&#39;).remove();\r\n                                        childRow.selectAll(&#39;text&#39;).remove();\r\n                                        for(var childRectCount = 0; childRectCount &lt; configDataCopy.details.length; childRectCount++)\r\n                                        {\r\n                                            childRow.append(&quot;rect&quot;)\r\n                                                    .attr(&quot;height&quot;, rowHeight)\r\n                                                    .attr(&quot;width&quot;, rectWidth)\r\n                                                    .attr(&quot;id&quot;, function(d){ return &quot;a&quot; + d.key;})\r\n                                                    .attr(&quot;x&quot;, (childRectCount * rectWidth))\r\n                                                    .attr(&quot;class&quot;, function(d){\r\n                                                        return d.zebra === true ? &quot;wl-widget-row-not-striped&quot; : &quot;wl-widget-row-striped&quot;;\r\n                                                    });\r\n    \r\n                                            childRow.append(&quot;text&quot;)\r\n                                                    .attr(&quot;dy&quot;, dy)\r\n                                                    .attr(&quot;dx&quot;, function(d){\r\n                                                        return childRectCount === 0 ? (childRectCount * rectWidth) + firstColumnPadding : (childRectCount*rectWidth);\r\n                                                    })\r\n                                                    .text(function(d) {\r\n                                                        return d[configDataCopy.details[childRectCount].key];\r\n                                                    });\r\n                                        }\r\n                                        return &quot;translate(&quot; + d.x + &quot;,&quot; + d.y + &quot;)&quot;;\r\n                                    })\r\n                                    .style(&quot;opacity&quot;, 1);",
            "link": "https://stackoverflow.com/questions/49913991/d3-js-is-slowing-the-performance",
            "title": "d3.js is slowing the performance",
            "body": "<p>The below mentioned snippet is slowing the performance. I am unable to find a better for this. its used to display table and its child rows as well. \nCan someone help me in optimizing this snippet for better use.</p>\n\n<p>THanks in advance</p>\n\n<pre><code>        childRow.transition()\n                                .duration(duration)\n                                .attr(\"transform\", function(d) {\n                                    //on transitions when clicked the child \n        rows are recalculated and placed accordingly on page\n                                    childRow.selectAll('rect').remove();\n                                    childRow.selectAll('text').remove();\n                                    for(var childRectCount = 0; childRectCount &lt; configDataCopy.details.length; childRectCount++)\n                                    {\n                                        childRow.append(\"rect\")\n                                                .attr(\"height\", rowHeight)\n                                                .attr(\"width\", rectWidth)\n                                                .attr(\"id\", function(d){ return \"a\" + d.key;})\n                                                .attr(\"x\", (childRectCount * rectWidth))\n                                                .attr(\"class\", function(d){\n                                                    return d.zebra === true ? \"wl-widget-row-not-striped\" : \"wl-widget-row-striped\";\n                                                });\n\n                                        childRow.append(\"text\")\n                                                .attr(\"dy\", dy)\n                                                .attr(\"dx\", function(d){\n                                                    return childRectCount === 0 ? (childRectCount * rectWidth) + firstColumnPadding : (childRectCount*rectWidth);\n                                                })\n                                                .text(function(d) {\n                                                    return d[configDataCopy.details[childRectCount].key];\n                                                });\n                                    }\n                                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                                })\n                                .style(\"opacity\", 1);\n</code></pre>\n"
        },
        {
            "tags": [
                "http",
                "google-chrome-devtools"
            ],
            "owner": {
                "reputation": 8118,
                "user_id": 338961,
                "user_type": "registered",
                "accept_rate": 84,
                "profile_image": "https://i.stack.imgur.com/TE0mK.jpg?s=128&g=1",
                "display_name": "tamakisquare",
                "link": "https://stackoverflow.com/users/338961/tamakisquare"
            },
            "is_answered": true,
            "view_count": 5449,
            "answer_count": 2,
            "score": 2,
            "last_activity_date": 1524142722,
            "creation_date": 1344593659,
            "last_edit_date": 1344685162,
            "question_id": 11899586,
            "body_markdown": "For the stated purpose, I have been using Chrome&#39;s Developer Tools. I kinda enjoy using the suite as it allows me to easily capture and view HTTP responses (Under &quot;Network&quot; tool -&gt; &quot;Response&quot; tab). Having that said, it lacks a feature that I need - the ability to search within a response document. To deal with this shortcoming, I would save the response document in a file and open it up in an editor, with which I perform my search. This solution is rather time-wasting. Is there a better solution available out there?",
            "link": "https://stackoverflow.com/questions/11899586/need-a-handy-tool-to-capture-http-responses-while-i-surf-with-my-browser",
            "title": "Need a handy tool to capture HTTP responses while I surf with my browser",
            "body": "<p>For the stated purpose, I have been using Chrome's Developer Tools. I kinda enjoy using the suite as it allows me to easily capture and view HTTP responses (Under \"Network\" tool -> \"Response\" tab). Having that said, it lacks a feature that I need - the ability to search within a response document. To deal with this shortcoming, I would save the response document in a file and open it up in an editor, with which I perform my search. This solution is rather time-wasting. Is there a better solution available out there?</p>\n"
        },
        {
            "tags": [
                "google-chrome-extension",
                "fetch"
            ],
            "owner": {
                "reputation": 354,
                "user_id": 1618877,
                "user_type": "registered",
                "accept_rate": 43,
                "profile_image": "https://graph.facebook.com/1137897620/picture?type=large",
                "display_name": "Nicholas Ritson",
                "link": "https://stackoverflow.com/users/1618877/nicholas-ritson"
            },
            "is_answered": false,
            "view_count": 15,
            "answer_count": 0,
            "score": 0,
            "last_activity_date": 1524142720,
            "creation_date": 1524142720,
            "question_id": 49921768,
            "body_markdown": "Just started looking into chrome extensions, i followed the docs and got it loaded in the browser, i wanted to make a fetch call when the user clicks the button in the address bar, all the docs who examples of onclick events, so i changed it to a onload event, however it does not seem to be working, ive pasted my code below for the popped up state. is this the right way to do this, just basically or have a missed something?\r\n\r\n    &lt;!doctype html&gt;\r\n    &lt;html&gt;\r\n      &lt;head&gt;\r\n        &lt;title&gt;Welcome&lt;/title&gt;\r\n      &lt;/head&gt;\r\n\r\n      &lt;script&gt;\r\n        function fetchResults() {\r\n            alert(&#39;alert&#39;);\r\n            console.log(&#39;console&#39;);\r\n            fetch(&#39;=== some api route ===&#39;)\r\n            .then(function(response) {\r\n                console.log(&#39;response&#39;, response);\r\n                return response.json();\r\n            })\r\n            .then(function(myJson) {\r\n                console.log(myJson);\r\n            });\r\n        }\r\n    &lt;/script&gt;\r\n  \r\n    &lt;style&gt;\r\n        body{\r\n            width: 450px;\r\n        }\r\n    &lt;/style&gt;\r\n\r\n    &lt;body onload=&quot;fetchResults()&quot;&gt;\r\n        &lt;div&gt;\r\n            &lt;h1&gt;Test Extension&lt;/h1&gt;\r\n            &lt;a href=&quot;#&quot;&gt;&lt;h3&gt;go to website&lt;/h3&gt;&lt;/a&gt;\r\n            &lt;p&gt;\r\n                Nam eu est ac urna tincidunt viverra. Vivamus vel condimentum ex, vel scelerisque risus.\r\n                Suspendisse id est odio. Proin a velit eu lectus molestie interdum non non sapien. Etiam\r\n                lacinia feugiat consequat. Nulla vel nulla eleifend, molestie lacus sit amet, viverra\r\n                diam. Vivamus mattis euismod velit. Praesent iaculis tincidunt lobortis. Proin pulvinar\r\n                auctor vehicula. Sed ac justo vitae ex aliquam aliquet id quis lacus.\r\n            &lt;/p&gt;\r\n        &lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;",
            "link": "https://stackoverflow.com/questions/49921768/chrome-extension-onload",
            "title": "Chrome Extension onload",
            "body": "<p>Just started looking into chrome extensions, i followed the docs and got it loaded in the browser, i wanted to make a fetch call when the user clicks the button in the address bar, all the docs who examples of onclick events, so i changed it to a onload event, however it does not seem to be working, ive pasted my code below for the popped up state. is this the right way to do this, just basically or have a missed something?</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Welcome&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;script&gt;\n    function fetchResults() {\n        alert('alert');\n        console.log('console');\n        fetch('=== some api route ===')\n        .then(function(response) {\n            console.log('response', response);\n            return response.json();\n        })\n        .then(function(myJson) {\n            console.log(myJson);\n        });\n    }\n&lt;/script&gt;\n\n&lt;style&gt;\n    body{\n        width: 450px;\n    }\n&lt;/style&gt;\n\n&lt;body onload=\"fetchResults()\"&gt;\n    &lt;div&gt;\n        &lt;h1&gt;Test Extension&lt;/h1&gt;\n        &lt;a href=\"#\"&gt;&lt;h3&gt;go to website&lt;/h3&gt;&lt;/a&gt;\n        &lt;p&gt;\n            Nam eu est ac urna tincidunt viverra. Vivamus vel condimentum ex, vel scelerisque risus.\n            Suspendisse id est odio. Proin a velit eu lectus molestie interdum non non sapien. Etiam\n            lacinia feugiat consequat. Nulla vel nulla eleifend, molestie lacus sit amet, viverra\n            diam. Vivamus mattis euismod velit. Praesent iaculis tincidunt lobortis. Proin pulvinar\n            auctor vehicula. Sed ac justo vitae ex aliquam aliquet id quis lacus.\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"
        },
        {
            "tags": [
                "python",
                "regex",
                "web-scraping",
                "beautifulsoup"
            ],
            "owner": {
                "reputation": 10,
                "user_id": 5384568,
                "user_type": "registered",
                "accept_rate": 40,
                "profile_image": "https://lh5.googleusercontent.com/-fHgGmkOMt5A/AAAAAAAAAAI/AAAAAAAAB7w/fHLSAukbPLA/photo.jpg?sz=128",
                "display_name": "Rajat Gupta",
                "link": "https://stackoverflow.com/users/5384568/rajat-gupta"
            },
            "is_answered": true,
            "view_count": 51,
            "accepted_answer_id": 49919445,
            "answer_count": 1,
            "score": -4,
            "last_activity_date": 1524142710,
            "creation_date": 1524133532,
            "last_edit_date": 1524141709,
            "question_id": 49918734,
            "body_markdown": "I&#39;ve written some script in python using `regex` to fetch text from certain `p` tags but he script is giving me empty list.\r\n\r\nThis is the magnetic portion of `html elements`:    \r\n\r\n       &lt;div class=&quot;result__links&quot;&gt;\r\n            &lt;p class=&quot;result__outcome u-hide-phablet&quot;&gt;Kolkata Knight Riders won by 7 wickets&lt;/p&gt;\r\n            &lt;p class=&quot;result__info u-hide-phablet&quot;&gt;\r\n                Match 15, 20:00 IST (14:30 GMT), Sawai Mansingh Stadium, Jaipur\r\n            &lt;/p&gt;\r\n            &lt;a class=&quot;result__button result__button--mc btn&quot; href=&quot;/match/2018/15?tab=scorecard&quot;&gt;Match Centre&lt;/a&gt;\r\n        &lt;/div&gt;\r\n\r\nHow do I fetch the text of `p` tag wrapped within the below class?\r\n\r\n    classs=&#39;result__info u-hide-phablet\r\n\r\nThe purpose is to fetch the text of above mentioned tag using `regex`.\r\n\r\nThis is what I&#39;ve tried so far:  \r\n\r\n    winner = soup.find_all(&#39;p&#39;,class_=&quot;result__outcome u-hide-phablet&quot;) \r\n    win_list = re.findall(r&#39;&gt;(.*?)&lt;/p&gt;&#39;, str(winner)) \r\n\r\nThe above portion produces empty list. Any help on this will be highly appreciated.\r\n\r\nPost script: I&#39;m looking for any solution related to `regex`.\r\n\r\n",
            "link": "https://stackoverflow.com/questions/49918734/how-to-i-get-text-from-p-tag-using-regex-applied-within-beautifulsoup",
            "title": "How to I get text from &lt;p&gt; tag using regex applied within BeautifulSoup?",
            "body": "<p>I've written some script in python using <code>regex</code> to fetch text from certain <code>p</code> tags but he script is giving me empty list.</p>\n\n<p>This is the magnetic portion of <code>html elements</code>:    </p>\n\n<pre><code>   &lt;div class=\"result__links\"&gt;\n        &lt;p class=\"result__outcome u-hide-phablet\"&gt;Kolkata Knight Riders won by 7 wickets&lt;/p&gt;\n        &lt;p class=\"result__info u-hide-phablet\"&gt;\n            Match 15, 20:00 IST (14:30 GMT), Sawai Mansingh Stadium, Jaipur\n        &lt;/p&gt;\n        &lt;a class=\"result__button result__button--mc btn\" href=\"/match/2018/15?tab=scorecard\"&gt;Match Centre&lt;/a&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>How do I fetch the text of <code>p</code> tag wrapped within the below class?</p>\n\n<pre><code>classs='result__info u-hide-phablet'\n</code></pre>\n\n<p>The purpose is to fetch the text of above mentioned tag using <code>regex</code>.</p>\n\n<p>This is what I've tried so far:  </p>\n\n<pre><code>winner = soup.find_all('p',class_=\"result__outcome u-hide-phablet\") \nwin_list = re.findall(r'&gt;(.*?)&lt;/p&gt;', str(winner)) \n</code></pre>\n\n<p>The above portion produces empty list. Any help on this will be highly appreciated.</p>\n\n<p>Post script: I'm looking for any solution related to <code>regex</code>.</p>\n"
        },
        {
            "tags": [
                "php",
                "mysql",
                "mysqli",
                "prepared-statement"
            ],
            "owner": {
                "reputation": 26,
                "user_id": 8831401,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/2b5a7926669b8d3a9c02745e40721d27?s=128&d=identicon&r=PG&f=1",
                "display_name": "Nayesh Daggula",
                "link": "https://stackoverflow.com/users/8831401/nayesh-daggula"
            },
            "is_answered": false,
            "view_count": 31,
            "answer_count": 0,
            "score": 0,
            "last_activity_date": 1524142706,
            "creation_date": 1524141222,
            "last_edit_date": 1524142706,
            "question_id": 49921255,
            "body_markdown": "I have two tables with one/two conditions and with particular id&#39;s\r\n\r\n**1. Table**\r\n\r\n     id  |   username    | password\r\n     ------------------------------\r\n      1  |     test      |  *******\r\n**2. table**\r\n\r\n\r\n      id |     usr_id    |  product\r\n     ------------------------------\r\n      1  |     test      |  test\r\n\r\nThis is i used statement. $usid = 1\r\n\r\n    $this-&gt;query(&quot;SELECT * &quot;. \r\n                 &quot;FROM bng_users INNER JOIN bng_userphotos &quot;.\r\n                 &quot;ON bng_users.id = bng_userphotos.bng_userid &quot;.\r\n                 &quot;WHERE FIND_IN_SET(id, :usid)&quot;);\r\n    $this-&gt;bind(&#39;:usid&#39;, $usid);\r\n    $row3 = $this-&gt;resultSet();\r\n    \r\nWhen I search `$usid = 1` need to check two tables with two conditions `id = $usid` and `usr_id = $usid`\r\n\r\nHow can I join them ?\r\n",
            "link": "https://stackoverflow.com/questions/49921255/join-two-tables-with-two-where-conditions-in-php-pdo-method",
            "title": "Join two tables with two where conditions in PHP pdo method",
            "body": "<p>I have two tables with one/two conditions and with particular id's</p>\n\n<p><strong>1. Table</strong></p>\n\n<pre><code> id  |   username    | password\n ------------------------------\n  1  |     test      |  *******\n</code></pre>\n\n<p><strong>2. table</strong></p>\n\n<pre><code>  id |     usr_id    |  product\n ------------------------------\n  1  |     test      |  test\n</code></pre>\n\n<p>This is i used statement. $usid = 1</p>\n\n<pre><code>$this-&gt;query(\"SELECT * \". \n             \"FROM bng_users INNER JOIN bng_userphotos \".\n             \"ON bng_users.id = bng_userphotos.bng_userid \".\n             \"WHERE FIND_IN_SET(id, :usid)\");\n$this-&gt;bind(':usid', $usid);\n$row3 = $this-&gt;resultSet();\n</code></pre>\n\n<p>When I search <code>$usid = 1</code> need to check two tables with two conditions <code>id = $usid</code> and <code>usr_id = $usid</code></p>\n\n<p>How can I join them ?</p>\n"
        },
        {
            "tags": [
                "dictionary",
                "go"
            ],
            "owner": {
                "reputation": 8,
                "user_id": 9669693,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/af7976fc335acee9665ba60f3c4ebaca?s=128&d=identicon&r=PG&f=1",
                "display_name": "crunsher",
                "link": "https://stackoverflow.com/users/9669693/crunsher"
            },
            "is_answered": true,
            "view_count": 38,
            "accepted_answer_id": 49921653,
            "answer_count": 2,
            "score": 1,
            "last_activity_date": 1524142704,
            "creation_date": 1524141959,
            "last_edit_date": 1524142704,
            "question_id": 49921496,
            "body_markdown": "I have written the following type and Get function for the Web Crawler exercise of the go tour.\r\n\r\n    type UrlCache struct {\r\n    \turls map[string]string\r\n    \tmux  sync.Mutex\r\n    }\r\n    \r\n    func (c *UrlCache) Get(key string) (value string, ok bool) {\r\n\t    c.mux.Lock()\r\n\t    defer c.mux.Unlock()\r\n\t    value, ok = c.urls[key]\r\n\t    return\r\n    }\r\n\r\nEverything works but I wonder if there is a way to improve the Get function, I have tried the following:\r\n\r\n\r\n    func (c *UrlCache) Get(key string) (string, bool) {\r\n    \tc.mux.Lock()\r\n    \tdefer c.mux.Unlock()\r\n    \treturn c.urls[key]\r\n    }\r\n    \r\n\r\nBut that throws\r\n\r\n    prog.go:24:2: not enough arguments to return\r\n    \thave (string)\r\n    \twant (string, bool)\r\n\r\nIs there a way to pass both return values of the get on the map as return?",
            "link": "https://stackoverflow.com/questions/49921496/passing-on-return-from-a-map-get",
            "title": "Passing on return from a map get",
            "body": "<p>I have written the following type and Get function for the Web Crawler exercise of the go tour.</p>\n\n<pre><code>type UrlCache struct {\n    urls map[string]string\n    mux  sync.Mutex\n}\n\nfunc (c *UrlCache) Get(key string) (value string, ok bool) {\n    c.mux.Lock()\n    defer c.mux.Unlock()\n    value, ok = c.urls[key]\n    return\n}\n</code></pre>\n\n<p>Everything works but I wonder if there is a way to improve the Get function, I have tried the following:</p>\n\n<pre><code>func (c *UrlCache) Get(key string) (string, bool) {\n    c.mux.Lock()\n    defer c.mux.Unlock()\n    return c.urls[key]\n}\n</code></pre>\n\n<p>But that throws</p>\n\n<pre><code>prog.go:24:2: not enough arguments to return\n    have (string)\n    want (string, bool)\n</code></pre>\n\n<p>Is there a way to pass both return values of the get on the map as return?</p>\n"
        },
        {
            "tags": [
                "python-3.x",
                "decode",
                "utf-16"
            ],
            "owner": {
                "reputation": 135,
                "user_id": 6159371,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/IkhNG.jpg?s=128&g=1",
                "display_name": "pingze",
                "link": "https://stackoverflow.com/users/6159371/pingze"
            },
            "is_answered": true,
            "view_count": 21,
            "answer_count": 1,
            "score": 1,
            "last_activity_date": 1524142700,
            "creation_date": 1524142299,
            "last_edit_date": 1524142360,
            "question_id": 49921613,
            "body_markdown": "In Py2:\r\n\r\n    (chr(145) + chr(78)).decode(&#39;utf-16&#39;)\r\n\r\nI got `u&#39;\\u4e91&#39;`:\r\n\r\nBut in Py3:\r\n\r\n    (chr(145) + chr(78)).encode(&#39;utf-8&#39;).decode(&#39;utf-16&#39;)\r\n\r\nI got an error:\r\n\r\n    Traceback (most recent call last):\r\n      File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\r\n    UnicodeDecodeError: &#39;utf-16-le&#39; codec can&#39;t decode byte 0x4e in position 2: truncated data\r\n\r\nSometimes, they work in a same way, such as `(chr(93) + chr(78))`, but sometimes not. \r\n\r\nWhy? And how can I do this right in Py3?\r\n",
            "link": "https://stackoverflow.com/questions/49921613/why-cant-i-decodeutf-16-success-in-python3-even-work-in-py2",
            "title": "Why can&#39;t I decode(&#39;utf-16&#39;) success in Python3 (even work in Py2)?",
            "body": "<p>In Py2:</p>\n\n<pre><code>(chr(145) + chr(78)).decode('utf-16')\n</code></pre>\n\n<p>I got <code>u'\\u4e91'</code>:</p>\n\n<p>But in Py3:</p>\n\n<pre><code>(chr(145) + chr(78)).encode('utf-8').decode('utf-16')\n</code></pre>\n\n<p>I got an error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nUnicodeDecodeError: 'utf-16-le' codec can't decode byte 0x4e in position 2: truncated data\n</code></pre>\n\n<p>Sometimes, they work in a same way, such as <code>(chr(93) + chr(78))</code>, but sometimes not. </p>\n\n<p>Why? And how can I do this right in Py3?</p>\n"
        },
        {
            "tags": [
                "javascript",
                "node.js",
                "discord",
                "discord.js"
            ],
            "owner": {
                "reputation": 13,
                "user_id": 9506192,
                "user_type": "registered",
                "profile_image": "https://i.stack.imgur.com/w8LyD.png?s=128&g=1",
                "display_name": "Clichefoox",
                "link": "https://stackoverflow.com/users/9506192/clichefoox"
            },
            "is_answered": true,
            "view_count": 20,
            "answer_count": 1,
            "score": 0,
            "last_activity_date": 1524142697,
            "creation_date": 1524111758,
            "question_id": 49912703,
            "body_markdown": "I am right now making a Discord bot command for runtime, I was wondering what the most compacted (and still correct) way of doing an runtime to catch how long the bot has actually been online and return it in 24hr format.",
            "link": "https://stackoverflow.com/questions/49912703/discord-js-runtime",
            "title": "Discord JS &quot;runtime&quot;",
            "body": "<p>I am right now making a Discord bot command for runtime, I was wondering what the most compacted (and still correct) way of doing an runtime to catch how long the bot has actually been online and return it in 24hr format.</p>\n"
        },
        {
            "tags": [
                "java",
                "unit-testing",
                "jdbc",
                "h2"
            ],
            "owner": {
                "reputation": 1425,
                "user_id": 720297,
                "user_type": "registered",
                "accept_rate": 73,
                "profile_image": "https://www.gravatar.com/avatar/b8154fa49a228472e647f361b1580fb6?s=128&d=identicon&r=PG",
                "display_name": "Aldian",
                "link": "https://stackoverflow.com/users/720297/aldian"
            },
            "is_answered": true,
            "view_count": 18,
            "answer_count": 1,
            "score": 1,
            "last_activity_date": 1524142683,
            "creation_date": 1524142683,
            "question_id": 49921752,
            "body_markdown": "I have the same problem on a regular basis: I want to perform unit testing on my DAO using an in-memory database. I am using H2, but I believe the problem is pretty much the same with HSQLDB. My unit test involves three steps:\r\n\r\n - create Database and setUp Database schema (using SQL script for instance)\r\n - insert required data for the test in the database (ex: with DbUnit)\r\n - perform actual testing\r\n\r\nIn very simple situations, it is possible to use the very same connection for all three steps, but as soon as things get a little more complicated (for instance when using a framework for querrying the database rather than using direct PreparedStatements), one connection per step is required.\r\n\r\nProblem: the database seems to be dropped as soon as the connection is closed. How to solve it?",
            "link": "https://stackoverflow.com/questions/49921752/make-multiple-connections-to-same-h2-in-memory-database",
            "title": "Make multiple connections to same H2 In memory Database",
            "body": "<p>I have the same problem on a regular basis: I want to perform unit testing on my DAO using an in-memory database. I am using H2, but I believe the problem is pretty much the same with HSQLDB. My unit test involves three steps:</p>\n\n<ul>\n<li>create Database and setUp Database schema (using SQL script for instance)</li>\n<li>insert required data for the test in the database (ex: with DbUnit)</li>\n<li>perform actual testing</li>\n</ul>\n\n<p>In very simple situations, it is possible to use the very same connection for all three steps, but as soon as things get a little more complicated (for instance when using a framework for querrying the database rather than using direct PreparedStatements), one connection per step is required.</p>\n\n<p>Problem: the database seems to be dropped as soon as the connection is closed. How to solve it?</p>\n"
        },
        {
            "tags": [
                "java",
                "logging",
                "pmd",
                "printstacktrace"
            ],
            "owner": {
                "reputation": 1424,
                "user_id": 1305398,
                "user_type": "registered",
                "accept_rate": 73,
                "profile_image": "https://www.gravatar.com/avatar/ce366fc975e65107bc8f71fff065c6c5?s=128&d=identicon&r=PG",
                "display_name": "user1305398",
                "link": "https://stackoverflow.com/users/1305398/user1305398"
            },
            "is_answered": true,
            "view_count": 56658,
            "accepted_answer_id": 10477646,
            "answer_count": 5,
            "score": 46,
            "last_activity_date": 1524142682,
            "creation_date": 1336371837,
            "last_edit_date": 1336372142,
            "question_id": 10477607,
            "body_markdown": "In my application, I am running my code through PMD.It shows me this message:\r\n\r\n&gt; -            Avoid printStackTrace(); use a logger call instead. \r\n\r\nWhat does that mean?",
            "link": "https://stackoverflow.com/questions/10477607/avoid-printstacktrace-use-a-logger-call-instead",
            "title": "Avoid printStackTrace(); use a logger call instead",
            "body": "<p>In my application, I am running my code through PMD.It shows me this message:</p>\n\n<blockquote>\n  <ul>\n  <li>Avoid printStackTrace(); use a logger call instead. </li>\n  </ul>\n</blockquote>\n\n<p>What does that mean?</p>\n"
        },
        {
            "tags": [
                "python",
                "printing",
                "keras",
                "index-error",
                "pre-trained-model"
            ],
            "owner": {
                "reputation": 992,
                "user_id": 5152497,
                "user_type": "registered",
                "accept_rate": 57,
                "profile_image": "https://www.gravatar.com/avatar/31173db9fa0458111656bb2c9cfa6a09?s=128&d=identicon&r=PG&f=1",
                "display_name": "J&#252;rgen K.",
                "link": "https://stackoverflow.com/users/5152497/j%c3%bcrgen-k"
            },
            "is_answered": true,
            "view_count": 41,
            "accepted_answer_id": 47453027,
            "answer_count": 1,
            "score": 0,
            "last_activity_date": 1524142681,
            "creation_date": 1511429387,
            "last_edit_date": 1524142681,
            "question_id": 47451919,
            "body_markdown": "I&#39;m trying to print out all known classes with their probability values. The first value is the class with the highest probability.\r\n\r\nHere is my code so far:\r\n\r\n    from keras.applications.vgg16 import VGG16\r\n    from keras.preprocessing.image import load_img\r\n    from keras.preprocessing.image import img_to_array\r\n    from keras.applications.vgg16 import preprocess_input\r\n    from keras.applications.vgg16 import decode_predictions\r\n    \r\n    model = VGG16()\r\n    \r\n    print(model.summary())\r\n\r\n    \r\n    # load an image from file\r\n    image = load_img(&#39;./pictures/door.jpg&#39;, target_size=(224, 224))\r\n    image = img_to_array(image)  #output Numpy-array\r\n    \r\n    #4-dimensional: samples, rows, columns, and channels.\r\n    image = image.reshape((1, image.shape[0], image.shape[1], image.shape[2]))\r\n    \r\n    \r\n    # prepare the image for the VGG model. \r\n    image = preprocess_input(image)\r\n    \r\n    \r\n    # predict the probability across all output classes. \r\n    yhat = model.predict(image)\r\n    \r\n    \r\n    # convert the probabilities to class labels\r\n    label = decode_predictions(yhat)\r\n    # retrieve the most likely result, e.g. highest probability\r\n    for i in range(0,5):\r\n        label = label[i][i]\r\n        print(&#39;%s (%.2f%%)&#39; % (label[1], label[2] * 100))\r\n\r\n\r\nI get the following error:\r\n\r\n    Traceback (most recent call last):\r\n      File path, line 38, in &lt;module&gt;\r\n        print(&#39;%s (%.2f%%)&#39; % (label[1], label[2] * 100))\r\n    IndexError: string index out of range\r\n    \r\nDo you have any idea how to handle it?\r\nThanks in advance^^",
            "link": "https://stackoverflow.com/questions/47451919/printing-all-claffication-classes-in-vgg-keras-indexerror",
            "title": "Printing all claffication classes in vgg, keras. IndexError",
            "body": "<p>I'm trying to print out all known classes with their probability values. The first value is the class with the highest probability.</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>from keras.applications.vgg16 import VGG16\nfrom keras.preprocessing.image import load_img\nfrom keras.preprocessing.image import img_to_array\nfrom keras.applications.vgg16 import preprocess_input\nfrom keras.applications.vgg16 import decode_predictions\n\nmodel = VGG16()\n\nprint(model.summary())\n\n\n# load an image from file\nimage = load_img('./pictures/door.jpg', target_size=(224, 224))\nimage = img_to_array(image)  #output Numpy-array\n\n#4-dimensional: samples, rows, columns, and channels.\nimage = image.reshape((1, image.shape[0], image.shape[1], image.shape[2]))\n\n\n# prepare the image for the VGG model. \nimage = preprocess_input(image)\n\n\n# predict the probability across all output classes. \nyhat = model.predict(image)\n\n\n# convert the probabilities to class labels\nlabel = decode_predictions(yhat)\n# retrieve the most likely result, e.g. highest probability\nfor i in range(0,5):\n    label = label[i][i]\n    print('%s (%.2f%%)' % (label[1], label[2] * 100))\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File path, line 38, in &lt;module&gt;\n    print('%s (%.2f%%)' % (label[1], label[2] * 100))\nIndexError: string index out of range\n</code></pre>\n\n<p>Do you have any idea how to handle it?\nThanks in advance^^</p>\n"
        },
        {
            "tags": [
                "nginx",
                "proxy",
                "openresty"
            ],
            "owner": {
                "reputation": 117,
                "user_id": 4634669,
                "user_type": "registered",
                "accept_rate": 62,
                "profile_image": "https://lh5.googleusercontent.com/-RCOr91QgPvQ/AAAAAAAAAAI/AAAAAAAAAIk/X1Aka8XIDgw/photo.jpg?sz=128",
                "display_name": "athavan kanapuli",
                "link": "https://stackoverflow.com/users/4634669/athavan-kanapuli"
            },
            "is_answered": true,
            "view_count": 20,
            "accepted_answer_id": 49921748,
            "answer_count": 1,
            "score": 0,
            "last_activity_date": 1524142674,
            "creation_date": 1524052131,
            "question_id": 49898969,
            "body_markdown": "I have an openresty nginx to proxy elasticsearch. So the grafana client contacts nginx and nginx in return fetches the response from elasticsearch. The goal is to change the http status to 504 if the response body from the elasticsearch contains the key **&quot;timedout&quot;: true**\r\n\r\nThe response body is read using **body_by_filter_lua_block** but this directive doesn&#39;t support to change the http status. \r\n\r\n    http {\r\n     lua_need_request_body on;\r\n     server {\r\n     listen 8000;\r\n     location / {\r\n        proxy_pass &quot;http://localhost:9200&quot;\r\n        header_filter_by_lua_block {\r\n            ngx.header.content_length = nil\r\n\r\n             }\r\n         body_filter_by_lua_block {\r\n            if string.find(ngx.arg[1], &quot;\\&quot;timedout\\&quot;:true&quot;) then\r\n              ngx.arg[1] = nil\r\n            }\r\n          }\r\n     }\r\n    }\r\nThe above code just makes the response body nil . But Is there a way to change the http status ? Or if it&#39;s not supported in nginx , is there any other proxy server which can do this job ?\r\n\r\nAny help would be appreciated.",
            "link": "https://stackoverflow.com/questions/49898969/nginx-openresty-change-http-status-after-reading-the-response-body",
            "title": "Nginx Openresty - Change http status after reading the response body",
            "body": "<p>I have an openresty nginx to proxy elasticsearch. So the grafana client contacts nginx and nginx in return fetches the response from elasticsearch. The goal is to change the http status to 504 if the response body from the elasticsearch contains the key <strong>\"timedout\": true</strong></p>\n\n<p>The response body is read using <strong>body_by_filter_lua_block</strong> but this directive doesn't support to change the http status. </p>\n\n<pre><code>http {\n lua_need_request_body on;\n server {\n listen 8000;\n location / {\n    proxy_pass \"http://localhost:9200\"\n    header_filter_by_lua_block {\n        ngx.header.content_length = nil\n\n         }\n     body_filter_by_lua_block {\n        if string.find(ngx.arg[1], \"\\\"timedout\\\":true\") then\n          ngx.arg[1] = nil\n        }\n      }\n }\n}\n</code></pre>\n\n<p>The above code just makes the response body nil . But Is there a way to change the http status ? Or if it's not supported in nginx , is there any other proxy server which can do this job ?</p>\n\n<p>Any help would be appreciated.</p>\n"
        },
        {
            "tags": [
                "java",
                "hadoop",
                "tableau",
                "mapr"
            ],
            "owner": {
                "reputation": 13,
                "user_id": 7935115,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/05f9ea425f7f60672f190de212630fb9?s=128&d=identicon&r=PG&f=1",
                "display_name": "mbauhardt",
                "link": "https://stackoverflow.com/users/7935115/mbauhardt"
            },
            "is_answered": false,
            "view_count": 14,
            "answer_count": 0,
            "score": 1,
            "last_activity_date": 1524142673,
            "creation_date": 1524130967,
            "last_edit_date": 1524142673,
            "question_id": 49917791,
            "body_markdown": "I want to extract a TDE file via Java\r\n\r\n\tnew Extract(fileName)\r\n\r\nbut I get the following error message:\r\n\r\n    Caused by: com.tableausoftware.TableauException: server did not call us back\r\n\tat com.tableausoftware.extract.Extract.&lt;init&gt;(Unknown Source)\r\n\r\n\r\nI read several threads in different forums. The suggested solution there was to set the correct permissions on the file `tdeserver64`.\r\nThis doesn&#39;t fix the issue, the exeption is still the same.\r\n\r\nThen I tried to run the sample code provided by the Tableau SDK. The sample code is working.\r\nThe difference between the sample code and my code is that the jar file `maprfs-5.2.0.jar` is in my classpath.\r\nWe are loading also a Hadoop configution which uses classes from the MapR jar to generate a binary `libMapRClient.5.2.0-mapr.so` file and load this file into the JNA path. \r\n\r\n    java.io.FileInputStream.open0(Native Method)\r\n    java.io.FileInputStream.open(FileInputStream.java:195)\r\n    java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\r\n    com.mapr.fs.ShimLoader.extractLibraryFile(ShimLoader.java:421)\r\n    com.mapr.fs.ShimLoader.findNativeLibrary(ShimLoader.java:529)\r\n    com.mapr.fs.ShimLoader.loadNativeLibrary(ShimLoader.java:340)\r\n    com.mapr.fs.ShimLoader.load(ShimLoader.java:226)\r\n    org.apache.hadoop.conf.CoreDefaultProperties&lt;clinit(CoreDefaultProperties.java:61)\r\n    java.lang.Class.forName0(Native Method)\r\n    java.lang.Class.forName(Class.java:348)\r\n \r\n\r\nIt looks like this leads to the exception mentioned above. I assume this because I get a âCâ stack trace, too:\r\n\r\n    *** glibc detected *** /usr/java/default/bin/java: free(): invalid pointer: 0x00007fde3a83e2c0 ***\r\n    ======= Backtrace: =========\r\n    /lib64/libc.so.6(+0x75dee)[0x7fdebd791dee]\r\n    /lib64/libc.so.6(+0x78c3d)[0x7fdebd794c3d]\r\n    /tmp/tableau-sdk/lib64/tableausdk/libtabsys.so(_ZNSs9_M_mutateEmmm+0x1c4)[0x7fde063b45c4]\r\n    /tmp/tableau-sdk/lib64/tableausdk/libtabsys.so(_ZNSs15_M_replace_safeEmmPKcm+0x1e)[0x7fde063b4a7e]\r\n    /root/tmp/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs8CidCache15GetCidForVolumeEPKcNS0_20VolLinkAttributeTypeEPjPNS0_6FidMsgEbb+0x4c2)[0x7fde3aea4982]\r\n    /root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs8CidCache4InitEPKciPmPjPNS0_9MapClientEb+0x1b1)[0x7fde3aea61b1]\r\n    /root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs9MapClient4InitEPmijjjPKcP8_jstringbb+0x1c7)[0x7fde3ae4bc17]\r\n    /root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs9MapClient9GetClientEP7JNIEnv_PKcPmijjjS5_P8_jstringbPNS0_19MapClientInitParamsEPib+0x10f)[0x7fde3ae793ef]\r\n    /root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs9MapClient9GetClientEP7JNIEnv_PKcPmijjjS5_P8_jstringbPNS0_19MapClientInitParamsEPi+0x49)[0x7fde3ae796d9]\r\n    /root/mapr-root-libMapRClient.5.2.0-mapr.so(Java_com_mapr_fs_jni_MapRClient_OpenClient+0x1b4)[0x7fde3af2f1c4]\r\n\r\nIf I remove the `maprfs.jar`, the extraction of the TDE file works.\r\n\r\nHad someone the same issue when trying to extract a TDE file on a MapR Hadoop cluster, or with `maprfs.jar` in the classpath?\r\n\r\nOr are there some restrictions regarding `libc.so`, `libtabsys.so` and `libMapRClient.so`?\r\n\r\nSide note: This issue happens only on Linux, not on Mac OS X.\r\n",
            "link": "https://stackoverflow.com/questions/49917791/extract-tde-file-from-tableau-server-fails-under-mapr",
            "title": "Extract TDE file from Tableau server fails under MapR",
            "body": "<p>I want to extract a TDE file via Java</p>\n\n<pre><code>new Extract(fileName)\n</code></pre>\n\n<p>but I get the following error message:</p>\n\n<pre><code>Caused by: com.tableausoftware.TableauException: server did not call us back\nat com.tableausoftware.extract.Extract.&lt;init&gt;(Unknown Source)\n</code></pre>\n\n<p>I read several threads in different forums. The suggested solution there was to set the correct permissions on the file <code>tdeserver64</code>.\nThis doesn't fix the issue, the exeption is still the same.</p>\n\n<p>Then I tried to run the sample code provided by the Tableau SDK. The sample code is working.\nThe difference between the sample code and my code is that the jar file <code>maprfs-5.2.0.jar</code> is in my classpath.\nWe are loading also a Hadoop configution which uses classes from the MapR jar to generate a binary <code>libMapRClient.5.2.0-mapr.so</code> file and load this file into the JNA path. </p>\n\n<pre><code>java.io.FileInputStream.open0(Native Method)\njava.io.FileInputStream.open(FileInputStream.java:195)\njava.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138)\ncom.mapr.fs.ShimLoader.extractLibraryFile(ShimLoader.java:421)\ncom.mapr.fs.ShimLoader.findNativeLibrary(ShimLoader.java:529)\ncom.mapr.fs.ShimLoader.loadNativeLibrary(ShimLoader.java:340)\ncom.mapr.fs.ShimLoader.load(ShimLoader.java:226)\norg.apache.hadoop.conf.CoreDefaultProperties&lt;clinit(CoreDefaultProperties.java:61)\njava.lang.Class.forName0(Native Method)\njava.lang.Class.forName(Class.java:348)\n</code></pre>\n\n<p>It looks like this leads to the exception mentioned above. I assume this because I get a âCâ stack trace, too:</p>\n\n<pre><code>*** glibc detected *** /usr/java/default/bin/java: free(): invalid pointer: 0x00007fde3a83e2c0 ***\n======= Backtrace: =========\n/lib64/libc.so.6(+0x75dee)[0x7fdebd791dee]\n/lib64/libc.so.6(+0x78c3d)[0x7fdebd794c3d]\n/tmp/tableau-sdk/lib64/tableausdk/libtabsys.so(_ZNSs9_M_mutateEmmm+0x1c4)[0x7fde063b45c4]\n/tmp/tableau-sdk/lib64/tableausdk/libtabsys.so(_ZNSs15_M_replace_safeEmmPKcm+0x1e)[0x7fde063b4a7e]\n/root/tmp/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs8CidCache15GetCidForVolumeEPKcNS0_20VolLinkAttributeTypeEPjPNS0_6FidMsgEbb+0x4c2)[0x7fde3aea4982]\n/root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs8CidCache4InitEPKciPmPjPNS0_9MapClientEb+0x1b1)[0x7fde3aea61b1]\n/root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs9MapClient4InitEPmijjjPKcP8_jstringbb+0x1c7)[0x7fde3ae4bc17]\n/root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs9MapClient9GetClientEP7JNIEnv_PKcPmijjjS5_P8_jstringbPNS0_19MapClientInitParamsEPib+0x10f)[0x7fde3ae793ef]\n/root/mapr-root-libMapRClient.5.2.0-mapr.so(_ZN4mapr2fs9MapClient9GetClientEP7JNIEnv_PKcPmijjjS5_P8_jstringbPNS0_19MapClientInitParamsEPi+0x49)[0x7fde3ae796d9]\n/root/mapr-root-libMapRClient.5.2.0-mapr.so(Java_com_mapr_fs_jni_MapRClient_OpenClient+0x1b4)[0x7fde3af2f1c4]\n</code></pre>\n\n<p>If I remove the <code>maprfs.jar</code>, the extraction of the TDE file works.</p>\n\n<p>Had someone the same issue when trying to extract a TDE file on a MapR Hadoop cluster, or with <code>maprfs.jar</code> in the classpath?</p>\n\n<p>Or are there some restrictions regarding <code>libc.so</code>, <code>libtabsys.so</code> and <code>libMapRClient.so</code>?</p>\n\n<p>Side note: This issue happens only on Linux, not on Mac OS X.</p>\n"
        },
        {
            "tags": [
                "bash",
                "shell",
                "unix",
                "awk",
                "sed"
            ],
            "owner": {
                "reputation": 6,
                "user_id": 9634839,
                "user_type": "registered",
                "profile_image": "https://www.gravatar.com/avatar/516d1e29e04479194afbb5623ed05bb7?s=128&d=identicon&r=PG&f=1",
                "display_name": "MissNaz",
                "link": "https://stackoverflow.com/users/9634839/missnaz"
            },
            "is_answered": false,
            "view_count": 45,
            "answer_count": 3,
            "score": 0,
            "last_activity_date": 1524142658,
            "creation_date": 1524119447,
            "last_edit_date": 1524121219,
            "question_id": 49914173,
            "body_markdown": "I have this input file F1 :\r\n\r\n    Good morning!\r\n    Have a nice day;\r\n    see you again the next day;\r\n    Bye;\r\n\r\nI want to print the lines between &quot;Have&quot; and &quot;day&quot;.\r\nI tried with this command:`*sed -n &#39;/Have/,/day/ p*&#39; F1`\r\n output is: Have a nice day\r\nBut I want second line also to be printed as it also has the same pattern &quot;day&quot;.\r\nDesired output:\r\n*Have a nice day;\r\nsee you again the next day;*\r\n\r\nCan anyone help me with this?\r\nThanks in advance.\r\n\r\n",
            "link": "https://stackoverflow.com/questions/49914173/how-to-print-lines-matching-between-two-patterns-but-second-pattern-existing-mul",
            "title": "how to print lines matching between two patterns but second pattern existing multiple times in a file using sed command or awk command?",
            "body": "<p>I have this input file F1 :</p>\n\n<pre><code>Good morning!\nHave a nice day;\nsee you again the next day;\nBye;\n</code></pre>\n\n<p>I want to print the lines between \"Have\" and \"day\".\nI tried with this command:<code>*sed -n '/Have/,/day/ p*' F1</code>\n output is: Have a nice day\nBut I want second line also to be printed as it also has the same pattern \"day\".\nDesired output:\n<em>Have a nice day;\nsee you again the next day;</em></p>\n\n<p>Can anyone help me with this?\nThanks in advance.</p>\n"
        }
    ],
    "has_more": true,
    "quota_max": 300,
    "quota_remaining": 39
}